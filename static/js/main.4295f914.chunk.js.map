{"version":3,"sources":["worker.js","../dicey-math/values.js","webpack:///./dicey-math/parser.js?8e80","../dicey-math/parser.js","../dicey-math/functions.js","../dicey-math/statements.js","../ //.md$","docs/about.md","docs/articles.md","docs/docs.md","docs/examples.md","docs/functions.md","styles.js","components/Navigation.jsx","state.js","components/Chart.jsx","components/CalcInput.jsx","components/CalcTable.jsx","components/OptionBar.jsx","components/Calculate.jsx","components/Doc.jsx","App.js","reportWebVitals.js","serviceWorkerRegistration.js","index.js","../dicey-math/index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","ksort","b","a","isNaN","parseFloat","ntimes","left","right","set","type","value","lc","denseCloud","z","values","length","SetValue","Array","k","fill","transform","CloudBuilder","this","entries","total","dense","sum","key","sources","undefined","JSON","stringify","reduction","c","Cloud","Die","sides","times","NumberValue","debug","tx","C","i","Math","max","add","done","collapse","elements","v","cloud","cross","lv","rv","ne","concat","sort","Block","body","Call","args","arguments","fn","require","Error","apply","number","map","join","clouds","cn","push","Object","reduce","e","nv","dx","val","StringValue","BinaryOperation","l","r","o","m","op","opMode","slice","rc","count","filter","n","applyOp","cb","reroll","okay","kk","floor","peg$SyntaxError","message","expected","found","location","captureStackTrace","child","parent","ctor","constructor","prototype","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","text","escapedParts","parts","classEscape","inverted","any","end","other","description","hex","ch","charCodeAt","toString","toUpperCase","s","replace","j","descriptions","describeExpected","describeFound","SyntaxError","parse","input","options","peg$result","peg$FAILED","peg$startRuleFunctions","start","peg$parsestart","peg$startRuleFunction","peg$c3","peg$c4","peg$literalExpectation","peg$c7","peg$c8","peg$c9","peg$c10","peg$c11","peg$c12","peg$classExpectation","peg$c14","peg$c15","peg$c16","peg$c17","peg$c18","peg$c19","peg$c20","peg$c21","peg$c23","peg$c24","peg$c27","peg$c29","peg$c31","peg$c33","peg$c34","peg$c35","peg$c37","peg$c39","peg$c41","peg$c43","math","peg$c44","peg$c45","peg$c47","peg$c48","peg$c50","peg$c51","peg$c52","peg$c54","peg$c56","peg$c57","peg$c59","peg$c61","peg$c62","peg$c64","peg$c66","peg$c67","peg$c69","peg$c73","peg$c75","peg$c79","peg$c80","peg$c85","peg$c88","peg$c90","peg$c91","peg$c92","peg$c93","peg$c95","peg$c96","peg$c97","peg$c98","peg$c99","peg$c100","peg$c101","peg$c102","peg$c103","peg$c104","peg$c105","peg$currPos","peg$savedPos","peg$posDetailsCache","line","column","peg$maxFailPos","peg$maxFailExpected","startRule","substring","ignoreCase","peg$computePosDetails","pos","p","details","peg$computeLocation","startPos","endPos","startPosDetails","endPosDetails","offset","peg$fail","peg$buildStructuredError","s0","s1","s2","s3","s4","peg$parseWS","peg$parseOutputStatement","peg$parseBlock","peg$parseExpression","expression","substr","s5","s6","s7","test","charAt","peg$parseNamed","peg$parseOutputExpression","peg$parseP2Bin","peg$parseCompare","peg$parseP1Bin","peg$parseValue","peg$parseP3Bin","peg$parseP4Bin","peg$parsePrimary","peg$parseDropLow","peg$parseDropHigh","peg$parseKeepLow","peg$parseKeepHigh","peg$parseNumbery","peg$parseNumber","peg$parseSet","peg$parseDie","d","peg$c81","peg$c82","peg$parseCloud","s8","s9","s10","s11","s12","peg$c25","peg$parseCall","peg$parseEscapeSequence","peg$parseString","f","peg$c76","parseInt","assign","arity","normal","len","stddev","nvarianceX2","mean","exp","min","vs2","vs1","explode","vs","best","shift","extra","penalty","pow","ls","bag","iif","condition","concequent","alternate","console","log","cw","aw","repeat","t","target","x","indexOf","Output","webpackContext","req","id","webpackContextResolve","__webpack_require__","code","keys","resolve","style","theme","root","display","active","color","toolbar","paddingRight","toolbarIcon","alignItems","justifyContent","padding","mixins","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","menuButtonHidden","title","flexGrow","drawerPaper","position","whiteSpace","drawerPaperClose","overflowX","spacing","breakpoints","up","appBarSpacer","content","height","overflow","container","paddingTop","paddingBottom","paper","flexDirection","muted","palette","secondary","textDecoration","fixedHeight","rightButton","float","backdrop","filler","byline","bottom","textAlign","useStyles","makeStyles","styles","Navigation","open","handleDrawerClose","classes","links","exact","Drawer","variant","clsx","className","IconButton","onClick","Divider","List","url","icon","ListItem","button","activeClassName","component","RouterLink","to","ListItemIcon","ListItemText","primary","Box","href","workerInstance","worker","reload","atom","default","random","query","parsed","selector","get","ok","parser","error","showReload","waitingWorker","mode","transpose","working","sample","fresh","sampleError","activeSample","terminate","compute","result","errors","se","ChartJS","register","LineController","LineElement","PointElement","LinearScale","Title","CategoryScale","CHART_COLORS","blue","red","orange","yellow","green","purple","grey","black","Chart","useRecoilValue","state","useState","setOptions","useTheme","datasets","data","setData","first","setFirst","useEffect","labels","label","nameIsValue","parsing","find","y","uv","backgroundColor","borderColor","delayBetweenPoints","animation","from","NaN","delay","ctx","xStarted","index","chart","scales","getPixelForValue","meta","getDatasetMeta","datasetIndex","getProps","yStarted","maintainAspectRatio","ticks","beginAtZero","callback","getLabelForValue","plugins","legend","interaction","intersect","textbox","fontFamily","card","CalcInput","useRecoilState","setExpression","Card","CardContent","TextField","multiline","maxRows","fullWidth","onChange","CardActions","Alert","severity","chony","tableContainer","maxHeight","pre","veryDense","bar","borderRadius","CalcTable","table","idx","TableContainer","Paper","Table","stickyHeader","size","TableHead","TableRow","TableCell","align","TableBody","row","rowid","scope","toFixed","lineHeight","OptionBar","setCollapse","setTranspose","setMode","RadioGroup","FormControlLabel","Radio","FormControl","Select","MenuItem","control","Switch","checked","SilentErrorBoundary","props","hasError","errorInfo","children","React","Component","doc","minHeight","freshness","top","opacity","marginTop","paddingLeft","a11yProps","TabPanel","role","hidden","SampleCacher","setSample","setFresh","useSetRecoilState","setSampleError","useRecoilStateLoadable","contents","ExportWrapper","exportText","readOnly","rows","RollContainer","roll","setRoll","Typography","gutterBottom","Button","acc","rollOn","raw","Freshness","CalcResult","tabValue","handleTabChange","AppBar","Toolbar","Tabs","scrollButtons","Tab","ZAlert","Calculate","q","URLSearchParams","useLocation","search","didLoadQuery","setDidLoadQuery","setQuery","setTimeout","Suspense","fallback","h1","h2","h3","h4","h5","h6","background","example","textTransform","Example","uri","encodeURIComponent","Docs","markdown","overrides","Link","li","kbd","Backdrop","CircularProgress","process","dox","Analytics","then","ReactGA","initialize","pageview","pathname","App","isDark","useMediaQuery","paletteType","setPaletType","useMemo","createMuiTheme","main","darken","pink","A400","history","useHistory","localStorage","redirect","setOpen","shouldStartClosed","amOpen","setShowReload","ThemeProvider","CssBaseline","Snackbar","action","postMessage","window","autoHideDuration","onClose","edge","noWrap","Container","maxWidth","path","render","match","params","page","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","hostname","config","navigator","URL","origin","addEventListener","swUrl","fetch","headers","response","contentType","status","serviceWorker","ready","registration","unregister","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","Root","setWaitingWorker","serviceWorkerRegistration","waiting","ReactDOM","StrictMode","document","getElementById","generate","valueize","keyComp","ao","bo"],"mappings":"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","file":"static/js/main.4295f914.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"compute\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"fec3536246eb06879deb.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","let ksort = (b, a) => {\n  a = isNaN(parseFloat(a)) ? a : parseFloat(a);\n  b = isNaN(parseFloat(b)) ? b : parseFloat(b);\n\n  if (b > a) return -1;\n  if (a > b) return 1;\n  return 0;\n};\n\nconst ntimes = (left, right, set = false) => {\n  if (left.type == \"number\" && left.value == 1) return right;\n  let lc = left.denseCloud();\n  let z = lc.values;\n\n  if (z.length == 1) {\n    return new SetValue(new Array(z[0].k[0]).fill(right), set);\n  }\n\n  return lc.transform((k) => {\n    let s = new SetValue(new Array(k[0]).fill(right), set);\n    return s;\n  });\n};\n\nclass CloudBuilder {\n  constructor() {\n    this.entries = {};\n    this.total = 0;\n    this.dense = true;\n    this.sum = 0;\n  }\n  add(k, w, sources = undefined) {\n    let key;\n    if (k.length != 1) {\n      this.dense = false;\n      key = k;\n    } else {\n      key = JSON.stringify(k);\n    }\n\n    if (!this.entries[key]) this.entries[key] = { k: k, w: w, sources };\n    else this.entries[key].w += w;\n\n    if (this.dense) this.sum += k[0] * w;\n\n    this.total += w;\n  }\n\n  done() {\n    if (this.total > 1e30) {\n      let reduction = 1e10;\n      for (let k in this.entries) this.entries[k].w /= reduction;\n      this.total /= reduction;\n      if (this.dense) this.sum /= reduction;\n    }\n    let c = new Cloud(this.entries, this.total, this.dense);\n    if (this.dense) c.sum = this.sum;\n    return c;\n  }\n}\n\nclass Die {\n  get type() {\n    return \"die\";\n  }\n  debug() {\n    return `d${this.sides.debug()}`;\n  }\n\n  constructor(sides = 6, times = undefined) {\n    this.sides = sides;\n    this.times = times == undefined ? new NumberValue(1) : times;\n  }\n\n  denseCloud() {\n    return this.tx().denseCloud();\n  }\n\n  tx() {\n    if (this.sides.type == \"number\") {\n      let total = this.sides.value;\n      if (total == 0) return new Cloud({ \"[0]\": { k: [0], w: 1 } }, 1, true);\n\n      let C = new CloudBuilder();\n      for (let i = 1; i <= Math.max(0, 0 | this.sides); ++i) {\n        C.add([i], 1, [this]);\n      }\n      return ntimes(this.times, C.done());\n    }\n    if (this.sides.type == \"set\" && this.sides.collapse) {\n      let C = new CloudBuilder();\n      for (let i = 0; i < this.sides.elements.length; ++i) {\n        C.add([this.sides.elements[i].value], 1, [this]);\n      }\n      return ntimes(this.times, C.done());\n    } else {\n      return this.sides.denseCloud().transform((v) => {\n        if (v[0] == 0) return new Cloud({ \"[0]\": { k: [0], w: 1 } }, 1, true);\n        return new Die(new NumberValue(v[0]), this.times).denseCloud();\n      });\n    }\n  }\n\n  cloud() {\n    if (this.times.type == \"number\" && this.times.value == 1)\n      return this.tx().denseCloud();\n    else return this.tx().cloud();\n  }\n}\n\nfunction cross(a, b) {\n  let C = new CloudBuilder();\n\n  for (let lv of a.values) {\n    for (let rv of b.values) {\n      let ne = [].concat(lv.k, rv.k);\n      ne.sort(ksort);\n      let sources = undefined;\n      if (lv.sources && rv.sources) sources = [].concat(lv.sources, rv.sources);\n      C.add(ne, rv.w * lv.w, sources);\n    }\n  }\n\n  return C.done();\n}\n\nclass Block {\n  get type() {\n    return \"block\";\n  }\n  constructor(body) {\n    this.body = body;\n  }\n\n  output() {\n    return this.body;\n  }\n}\n\nclass Call {\n  constructor(name, args) {\n    this.name = name;\n    this.arguments = args;\n  }\n\n  fn() {\n    let fn = require(\"./functions\")[this.name];\n    if (!fn) throw new Error(`Undefined function '${this.name}'`);\n    return fn.apply(this, this.arguments);\n  }\n\n  denseCloud() {\n    return this.fn().denseCloud();\n  }\n\n  number() {\n    return this.fn().number();\n  }\n\n  cloud() {\n    switch (this.name) {\n      case \"sum\":\n      case \"max\":\n      case \"min\":\n        return this.denseCloud();\n      default:\n        return this.fn().cloud();\n    }\n  }\n}\n\nclass SetValue {\n  get type() {\n    return \"set\";\n  }\n  debug() {\n    return \"{\" + this.elements.map((v) => v.debug()).join(\",\") + \"}\";\n  }\n\n  constructor(elements, collapse = false) {\n    this.elements = elements;\n    this.collapse = collapse;\n  }\n\n  cloud() {\n    let clouds = this.collapse\n      ? this.elements.map((c) => c.denseCloud())\n      : this.elements.map((c) => c.cloud());\n\n    while (clouds.length > 1) {\n      let cn = [];\n      for (let i = 0; i < clouds.length; i += 2) {\n        if (clouds.length == i + 1) {\n          cn.push(clouds[i]);\n          break;\n        }\n\n        cn.push(cross(clouds[i], clouds[i + 1]));\n      }\n      clouds = cn;\n    }\n    return clouds[0];\n  }\n\n  denseCloud() {\n    let clouds = this.elements.map((c) => c.denseCloud());\n    while (clouds.length > 1) {\n      let cn = [];\n      for (let i = 0; i < clouds.length; i += 2) {\n        if (clouds.length == i + 1) {\n          cn.push(clouds[i]);\n          break;\n        }\n\n        if (\n          (i > 1) & (clouds[i] === clouds[i - 2]) &&\n          clouds[i + 1] === clouds[i - 1]\n        ) {\n          cn.push(cn[cn.length - 1]);\n          continue;\n        }\n\n        let C = new CloudBuilder();\n\n        for (let lv of clouds[i].values) {\n          for (let rv of clouds[i + 1].values) {\n            let ne = lv.k[0] + rv.k[0];\n            C.add([ne], rv.w * lv.w);\n          }\n        }\n\n        cn.push(C.done());\n      }\n      clouds = cn;\n    }\n    return clouds[0];\n  }\n}\n\nclass Cloud {\n  get type() {\n    return \"cloud\";\n  }\n  constructor(map, total, dense = false) {\n    this.values = Object.values(map);\n    this.total = total;\n    this.dense = dense;\n    for (let v of Object.values(map))\n      if (v.k === undefined) throw new Error(\"Invalid map\");\n  }\n\n  cloud() {\n    return this;\n  }\n  denseCloud() {\n    if (this.dense) return this;\n    return this.collapse();\n  }\n\n  number() {\n    if (this.values.length != 1) throw new Error(\"Wanted a single value.\");\n    if (this.values[0].k.length != 1) throw new Error(\"Wanted a single value.\");\n    return new NumberValue(this.values[0].k[0]);\n  }\n\n  collapse(fn) {\n    if (fn == undefined && this.dense) return this;\n    if (fn == undefined)\n      fn = (k) => [\n        k.reduce((v, e) => {\n          if (typeof v == \"number\" && typeof e == \"number\") return v + e;\n          else return \"\" + v + \" \" + e;\n        }),\n      ];\n\n    let C = new CloudBuilder();\n    for (let v of this.values) {\n      if (v.k.length > 0) {\n        let ne = fn(v.k);\n        C.add(ne, v.w);\n      } else {\n        C.add([0], v.w);\n      }\n    }\n    return C.done();\n  }\n\n  // Takes a function that given a vaue returns a cloud;\n  transform(fn) {\n    let C = new CloudBuilder();\n\n    for (let v of this.values) {\n      let rv = fn(v.k, v).cloud();\n      for (let nv of rv.values) {\n        let dx = (nv.w / rv.total) * v.w;\n        C.add(nv.k, dx);\n      }\n    }\n    return C.done();\n  }\n}\n\nclass NumberValue {\n  get type() {\n    return \"number\";\n  }\n  debug() {\n    return `${this.value}`;\n  }\n\n  constructor(val) {\n    this.value = parseFloat(val);\n  }\n\n  valueOf() {\n    return this.value;\n  }\n\n  cloud() {\n    let elements = {};\n    elements[JSON.stringify([this.value])] = { k: [this.value], w: 1 };\n    return new Cloud(elements, 1, this);\n  }\n  denseCloud() {\n    return this.cloud();\n  }\n  number() {\n    return this;\n  }\n}\n\nclass StringValue {\n  constructor(value) {\n    this.value = value;\n  }\n  cloud() {\n    let elements = {};\n    elements[JSON.stringify([this.value])] = { k: [this.value], w: 1 };\n    return new Cloud(elements, 1, this);\n  }\n  denseCloud() {\n    return this.cloud();\n  }\n  number() {\n    throw new Error(\"needed a number but got a string\");\n  }\n}\n\nclass BinaryOperation {\n  constructor(l, [o, m], r) {\n    this.left = l;\n    this.op = o;\n    this.opMode = m;\n    this.right = r;\n  }\n\n  static applyOp(left, op, right) {\n    switch (op) {\n      case \"+\":\n        if (typeof left == \"number\" && typeof right == \"number\")\n          return left + right;\n        else return \"\" + left + \" \" + right;\n      case \"-\":\n        return left - right;\n      case \"/\":\n        return Math.floor(left / right);\n      case \"*\":\n        return left * right;\n\n      case \">\":\n        return left > right ? 1 : 0;\n      case \"<\":\n        return left < right ? 1 : 0;\n      case \">=\":\n        return left >= right ? 1 : 0;\n      case \"<=\":\n        return left >= right ? 1 : 0;\n\n      case \"==\":\n      case \"=\":\n        return left == right ? 1 : 0;\n      case \"!=\":\n        return left != right ? 1 : 0;\n    }\n  }\n\n  denseCloud() {\n    return this.cloud().collapse();\n  }\n\n  number() {\n    return this.cloud().number();\n  }\n\n  cloud() {\n    if (this.op == \"dl\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) =>\n        lc.collapse((k) => k.slice(0, Math.max(k.length - v[0], 0)))\n      );\n    }\n    if (this.op == \"dh\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) => lc.collapse((k) => k.slice(v[0])));\n    }\n\n    if (this.op == \"kh\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) => lc.collapse((k) => k.slice(0, v[0])));\n    }\n    if (this.op == \"kl\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) =>\n        lc.collapse((k) => k.slice(Math.max(k.length - v[0], 0)))\n      );\n    }\n    if (this.op == \"@\") {\n      let lc = this.left.denseCloud();\n      let rc = this.right.cloud();\n      return lc.transform((v) =>\n        rc.collapse((k) => (v[0] > 0 && k.length >= v[0] ? [k[v[0] - 1]] : [0]))\n      );\n    }\n\n    if (this.op == \"ntimes\") {\n      return ntimes(this.left, this.right).cloud();\n    }\n\n    if (this.opMode === \"cs\") {\n      let val = this.right.number();\n\n      return this.left.cloud().transform((k) => {\n        let count = k.filter((n) =>\n          BinaryOperation.applyOp(n, this.op, val)\n        ).length;\n        return new NumberValue(count).denseCloud();\n      });\n    }\n\n    if (this.opMode === \"ro\") {\n      let val = this.right.number();\n\n      let cb = new CloudBuilder();\n      for (let e of this.left.cloud().values) {\n        let reroll = [];\n        let okay = [];\n        for (let i = 0; i < e.k.length; ++i) {\n          if (BinaryOperation.applyOp(e.k[i], this.op, val)) {\n            if (!e.sources)\n              throw new Error(\n                \"Tried to reroll a value that couldnt be traced back to a die\"\n              );\n            reroll.push(new Die(e.sources[i].sides));\n          } else {\n            okay.push(e.k[i]);\n          }\n        }\n\n        if (reroll.length === 0) {\n          cb.add(e.k, e.w, e.sources);\n        } else {\n          let s = new SetValue(reroll);\n          let c = s.cloud();\n          for (let o of c.values) {\n            let ne = [].concat(okay, o.k);\n            ne.sort(ksort);\n            cb.add(ne, (e.w * o.w) / c.total);\n          }\n        }\n      }\n\n      return cb.done();\n    }\n\n    if (this.opMode === \"zu\") {\n      let val = this.right.number();\n\n      let cb = new CloudBuilder();\n      for (let e of this.left.cloud().values) {\n        let kk = [];\n        for (let i = 0; i < e.k.length; ++i) {\n          if (BinaryOperation.applyOp(e.k[i], this.op, val)) {\n            kk.push(e.k[i]);\n          } else {\n            kk.push(0);\n          }\n        }\n\n        cb.add(kk, e.w);\n      }\n\n      return cb.done();\n    }\n\n    let left = this.left.denseCloud();\n    let right = this.right.denseCloud();\n\n    let C = new CloudBuilder();\n\n    for (let lv of left.values) {\n      for (let rv of right.values) {\n        let nv = lv.w * rv.w;\n        let ne = BinaryOperation.applyOp(lv.k[0], this.op, rv.k[0]);\n        C.add([ne], nv);\n      }\n    }\n\n    return C.done();\n  }\n}\n\nmodule.exports = {\n  Die,\n  SetValue,\n  Cloud,\n  NumberValue,\n  BinaryOperation,\n  Call,\n  Block,\n  CloudBuilder,\n  StringValue,\n  ksort,\n  ntimes,\n};\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { start: peg$parsestart },\n      peg$startRuleFunction  = peg$parsestart,\n\n      peg$c0 = function(b) { return b; },\n      peg$c1 = function(e) { return {\n          type: 'block',\n          body: [{type: 'output', expression: e, name: text()}]\n        }; },\n      peg$c2 = function(e) { return {\n        type: 'block',\n        body: e.map(v => v[1]) }; },\n      peg$c3 = \"output\",\n      peg$c4 = peg$literalExpectation(\"output\", false),\n      peg$c5 = function(e) { return {type: 'output', expression: e[0], text: e[1], name: e[2]}; },\n      peg$c6 = function(e, n) { return [e, text(), n] },\n      peg$c7 = \"named\",\n      peg$c8 = peg$literalExpectation(\"named\", false),\n      peg$c9 = \"\\\"\",\n      peg$c10 = peg$literalExpectation(\"\\\"\", false),\n      peg$c11 = /^[^\"]/,\n      peg$c12 = peg$classExpectation([\"\\\"\"], true, false),\n      peg$c13 = function(s) { return s },\n      peg$c14 = /^[ \\n\\t\\r]/,\n      peg$c15 = peg$classExpectation([\" \", \"\\n\", \"\\t\", \"\\r\"], false, false),\n      peg$c16 = /^[a-z]/,\n      peg$c17 = peg$classExpectation([[\"a\", \"z\"]], false, false),\n      peg$c18 = \"(\",\n      peg$c19 = peg$literalExpectation(\"(\", false),\n      peg$c20 = \")\",\n      peg$c21 = peg$literalExpectation(\")\", false),\n      peg$c22 = function(n) { return {type: 'call', name:n, args:[]}; },\n      peg$c23 = \",\",\n      peg$c24 = peg$literalExpectation(\",\", false),\n      peg$c25 = function(n, e, o) {\n          let a = [e];\n          for ( let b of o ) a.push(b[2]);\n          return {type: 'call', name:n, args:a}; \n        },\n      peg$c26 = \"cs\",\n      peg$c27 = peg$literalExpectation(\"cs\", false),\n      peg$c28 = \"ms\",\n      peg$c29 = peg$literalExpectation(\"ms\", false),\n      peg$c30 = \"ro\",\n      peg$c31 = peg$literalExpectation(\"ro\", false),\n      peg$c32 = \"zu\",\n      peg$c33 = peg$literalExpectation(\"zu\", false),\n      peg$c34 = /^[<>]/,\n      peg$c35 = peg$classExpectation([\"<\", \">\"], false, false),\n      peg$c36 = \"=\",\n      peg$c37 = peg$literalExpectation(\"=\", false),\n      peg$c38 = \"==\",\n      peg$c39 = peg$literalExpectation(\"==\", false),\n      peg$c40 = \"!=\",\n      peg$c41 = peg$literalExpectation(\"!=\", false),\n      peg$c42 = function(m, o) { return m ? {m: m, op: o} : {op: o}; },\n      peg$c43 = function(l, o) { return math(l,o) },\n      peg$c44 = /^[+\\-]/,\n      peg$c45 = peg$classExpectation([\"+\", \"-\"], false, false),\n      peg$c46 = function(l, o) { return math(l,o); },\n      peg$c47 = /^[*\\/]/,\n      peg$c48 = peg$classExpectation([\"*\", \"/\"], false, false),\n      peg$c49 = \"@\",\n      peg$c50 = peg$literalExpectation(\"@\", false),\n      peg$c51 = \"droplow\",\n      peg$c52 = peg$literalExpectation(\"droplow\", false),\n      peg$c53 = \"dl\",\n      peg$c54 = peg$literalExpectation(\"dl\", false),\n      peg$c55 = function() { return 'dl'; },\n      peg$c56 = \"keeplow\",\n      peg$c57 = peg$literalExpectation(\"keeplow\", false),\n      peg$c58 = \"kl\",\n      peg$c59 = peg$literalExpectation(\"kl\", false),\n      peg$c60 = function() { return 'kl'; },\n      peg$c61 = \"drophigh\",\n      peg$c62 = peg$literalExpectation(\"drophigh\", false),\n      peg$c63 = \"dh\",\n      peg$c64 = peg$literalExpectation(\"dh\", false),\n      peg$c65 = function() { return 'dh'; },\n      peg$c66 = \"keephigh\",\n      peg$c67 = peg$literalExpectation(\"keephigh\", false),\n      peg$c68 = \"kh\",\n      peg$c69 = peg$literalExpectation(\"kh\", false),\n      peg$c70 = function() { return 'kh'; },\n      peg$c71 = function(e) { return e },\n      peg$c72 = \"{\",\n      peg$c73 = peg$literalExpectation(\"{\", false),\n      peg$c74 = \"}\",\n      peg$c75 = peg$literalExpectation(\"}\", false),\n      peg$c76 = function(f, e) {\n        let elements = [f];\n        for (let i = 0; i < e.length; i++) {\n          elements.push(e[i][3]);\n        }\n        return {type: 'set', elements: elements };\n      },\n      peg$c77 = function(d) {\n          //return { type: 'set', elements: [d] };\n          return d;\n        },\n      peg$c78 = function(n, d) { \n          if (n === 1) return d;\n          return { type: 'die', times: n, sides: d.sides }\n        },\n      peg$c79 = \"d\",\n      peg$c80 = peg$literalExpectation(\"d\", false),\n      peg$c81 = function(n, d) {\n          return { type: 'die', times: n, sides: d };\n        },\n      peg$c82 = function(d) {\n          return { type: 'die', sides: d };\n        },\n      peg$c83 = function(n) { return {type: 'die', sides: n}; },\n      peg$c84 = \"d%\",\n      peg$c85 = peg$literalExpectation(\"d%\", false),\n      peg$c86 = function() { return {type: 'die', sides: 100}; },\n      peg$c87 = \"dF\",\n      peg$c88 = peg$literalExpectation(\"dF\", false),\n      peg$c89 = function() { return {type: 'die', sides: { type: 'set', elements: [-1, 0, 1] } }; },\n      peg$c90 = /^[\\-]/,\n      peg$c91 = peg$classExpectation([\"-\"], false, false),\n      peg$c92 = /^[0-9]/,\n      peg$c93 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c94 = function(d) { return parseInt(d); },\n      peg$c95 = /^[\\\\]/,\n      peg$c96 = peg$classExpectation([\"\\\\\"], false, false),\n      peg$c97 = /^[\"']/,\n      peg$c98 = peg$classExpectation([\"\\\"\", \"'\"], false, false),\n      peg$c99 = \" \",\n      peg$c100 = peg$literalExpectation(\" \", false),\n      peg$c101 = function(v) { return { type: 'string', value:  v.join('')}},\n      peg$c102 = \"'\",\n      peg$c103 = peg$literalExpectation(\"'\", false),\n      peg$c104 = /^[^']/,\n      peg$c105 = peg$classExpectation([\"'\"], true, false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsestart() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parseBlock();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseWS();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c0(s1);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parseExpression();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseWS();\n        if (s2 === peg$FAILED) {\n          s2 = null;\n        }\n        if (s2 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c1(s1);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseBlock() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$currPos;\n    s3 = peg$parseWS();\n    if (s3 !== peg$FAILED) {\n      s4 = peg$parseOutputStatement();\n      if (s4 !== peg$FAILED) {\n        s3 = [s3, s4];\n        s2 = s3;\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s2;\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$currPos;\n        s3 = peg$parseWS();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseOutputStatement();\n          if (s4 !== peg$FAILED) {\n            s3 = [s3, s4];\n            s2 = s3;\n          } else {\n            peg$currPos = s2;\n            s2 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s2;\n          s2 = peg$FAILED;\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c2(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseOutputStatement() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 6) === peg$c3) {\n      s1 = peg$c3;\n      peg$currPos += 6;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c4); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseWS();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseOutputExpression();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c5(s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseOutputExpression() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = peg$parseExpression();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseNamed();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c6(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseNamed() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parseWS();\n    if (s1 !== peg$FAILED) {\n      if (input.substr(peg$currPos, 5) === peg$c7) {\n        s2 = peg$c7;\n        peg$currPos += 5;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c8); }\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseWS();\n        if (s3 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 34) {\n            s4 = peg$c9;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c10); }\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$currPos;\n            s6 = [];\n            if (peg$c11.test(input.charAt(peg$currPos))) {\n              s7 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s7 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c12); }\n            }\n            if (s7 !== peg$FAILED) {\n              while (s7 !== peg$FAILED) {\n                s6.push(s7);\n                if (peg$c11.test(input.charAt(peg$currPos))) {\n                  s7 = input.charAt(peg$currPos);\n                  peg$currPos++;\n                } else {\n                  s7 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c12); }\n                }\n              }\n            } else {\n              s6 = peg$FAILED;\n            }\n            if (s6 !== peg$FAILED) {\n              s5 = input.substring(s5, peg$currPos);\n            } else {\n              s5 = s6;\n            }\n            if (s5 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 34) {\n                s6 = peg$c9;\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c10); }\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c13(s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseWS() {\n    var s0, s1;\n\n    s0 = [];\n    if (peg$c14.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c15); }\n    }\n    while (s1 !== peg$FAILED) {\n      s0.push(s1);\n      if (peg$c14.test(input.charAt(peg$currPos))) {\n        s1 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c15); }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseExpression() {\n    var s0;\n\n    s0 = peg$parseP1Bin();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseValue();\n    }\n\n    return s0;\n  }\n\n  function peg$parseCall() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11, s12;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = [];\n    if (peg$c16.test(input.charAt(peg$currPos))) {\n      s3 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s3 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c17); }\n    }\n    if (s3 !== peg$FAILED) {\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        if (peg$c16.test(input.charAt(peg$currPos))) {\n          s3 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c17); }\n        }\n      }\n    } else {\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseWS();\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 40) {\n          s3 = peg$c18;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c19); }\n        }\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseWS();\n          if (s4 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 41) {\n              s5 = peg$c20;\n              peg$currPos++;\n            } else {\n              s5 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c21); }\n            }\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c22(s1);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = [];\n      if (peg$c16.test(input.charAt(peg$currPos))) {\n        s3 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c17); }\n      }\n      if (s3 !== peg$FAILED) {\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          if (peg$c16.test(input.charAt(peg$currPos))) {\n            s3 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c17); }\n          }\n        }\n      } else {\n        s2 = peg$FAILED;\n      }\n      if (s2 !== peg$FAILED) {\n        s1 = input.substring(s1, peg$currPos);\n      } else {\n        s1 = s2;\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseWS();\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 40) {\n            s3 = peg$c18;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c19); }\n          }\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseWS();\n            if (s4 !== peg$FAILED) {\n              s5 = peg$parseExpression();\n              if (s5 !== peg$FAILED) {\n                s6 = peg$parseWS();\n                if (s6 !== peg$FAILED) {\n                  s7 = [];\n                  s8 = peg$currPos;\n                  if (input.charCodeAt(peg$currPos) === 44) {\n                    s9 = peg$c23;\n                    peg$currPos++;\n                  } else {\n                    s9 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c24); }\n                  }\n                  if (s9 !== peg$FAILED) {\n                    s10 = peg$parseWS();\n                    if (s10 !== peg$FAILED) {\n                      s11 = peg$parseExpression();\n                      if (s11 !== peg$FAILED) {\n                        s12 = peg$parseWS();\n                        if (s12 !== peg$FAILED) {\n                          s9 = [s9, s10, s11, s12];\n                          s8 = s9;\n                        } else {\n                          peg$currPos = s8;\n                          s8 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s8;\n                        s8 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s8;\n                      s8 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s8;\n                    s8 = peg$FAILED;\n                  }\n                  while (s8 !== peg$FAILED) {\n                    s7.push(s8);\n                    s8 = peg$currPos;\n                    if (input.charCodeAt(peg$currPos) === 44) {\n                      s9 = peg$c23;\n                      peg$currPos++;\n                    } else {\n                      s9 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c24); }\n                    }\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parseWS();\n                      if (s10 !== peg$FAILED) {\n                        s11 = peg$parseExpression();\n                        if (s11 !== peg$FAILED) {\n                          s12 = peg$parseWS();\n                          if (s12 !== peg$FAILED) {\n                            s9 = [s9, s10, s11, s12];\n                            s8 = s9;\n                          } else {\n                            peg$currPos = s8;\n                            s8 = peg$FAILED;\n                          }\n                        } else {\n                          peg$currPos = s8;\n                          s8 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s8;\n                        s8 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s8;\n                      s8 = peg$FAILED;\n                    }\n                  }\n                  if (s7 !== peg$FAILED) {\n                    if (input.charCodeAt(peg$currPos) === 41) {\n                      s8 = peg$c20;\n                      peg$currPos++;\n                    } else {\n                      s8 = peg$FAILED;\n                      if (peg$silentFails === 0) { peg$fail(peg$c21); }\n                    }\n                    if (s8 !== peg$FAILED) {\n                      peg$savedPos = s0;\n                      s1 = peg$c25(s1, s5, s7);\n                      s0 = s1;\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseCompare() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (input.substr(peg$currPos, 2) === peg$c26) {\n      s2 = peg$c26;\n      peg$currPos += 2;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c27); }\n    }\n    if (s2 === peg$FAILED) {\n      if (input.substr(peg$currPos, 2) === peg$c28) {\n        s2 = peg$c28;\n        peg$currPos += 2;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c29); }\n      }\n      if (s2 === peg$FAILED) {\n        if (input.substr(peg$currPos, 2) === peg$c30) {\n          s2 = peg$c30;\n          peg$currPos += 2;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c31); }\n        }\n        if (s2 === peg$FAILED) {\n          if (input.substr(peg$currPos, 2) === peg$c32) {\n            s2 = peg$c32;\n            peg$currPos += 2;\n          } else {\n            s2 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c33); }\n          }\n        }\n      }\n    }\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$currPos;\n      s3 = peg$currPos;\n      if (peg$c34.test(input.charAt(peg$currPos))) {\n        s4 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s4 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c35); }\n      }\n      if (s4 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 61) {\n          s5 = peg$c36;\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c37); }\n        }\n        if (s5 === peg$FAILED) {\n          s5 = null;\n        }\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      if (s3 === peg$FAILED) {\n        if (input.substr(peg$currPos, 2) === peg$c38) {\n          s3 = peg$c38;\n          peg$currPos += 2;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c39); }\n        }\n        if (s3 === peg$FAILED) {\n          if (input.substr(peg$currPos, 2) === peg$c40) {\n            s3 = peg$c40;\n            peg$currPos += 2;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c41); }\n          }\n          if (s3 === peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 61) {\n              s3 = peg$c36;\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c37); }\n            }\n          }\n        }\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = input.substring(s2, peg$currPos);\n      } else {\n        s2 = s3;\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c42(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseP1Bin() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parseP2Bin();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parseWS();\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parseCompare();\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parseWS();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parseP2Bin();\n            if (s7 !== peg$FAILED) {\n              s4 = [s4, s5, s6, s7];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parseWS();\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseCompare();\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parseWS();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parseP2Bin();\n              if (s7 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c43(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseP2Bin();\n    }\n\n    return s0;\n  }\n\n  function peg$parseP2Bin() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parseP3Bin();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parseWS();\n      if (s4 !== peg$FAILED) {\n        if (peg$c44.test(input.charAt(peg$currPos))) {\n          s5 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c45); }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parseWS();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parseP3Bin();\n            if (s7 !== peg$FAILED) {\n              s4 = [s4, s5, s6, s7];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parseWS();\n        if (s4 !== peg$FAILED) {\n          if (peg$c44.test(input.charAt(peg$currPos))) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c45); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parseWS();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parseP3Bin();\n              if (s7 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c46(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseP3Bin();\n    }\n\n    return s0;\n  }\n\n  function peg$parseP3Bin() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parseP4Bin();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parseWS();\n      if (s4 !== peg$FAILED) {\n        if (peg$c47.test(input.charAt(peg$currPos))) {\n          s5 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s5 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parseWS();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parseP4Bin();\n            if (s7 !== peg$FAILED) {\n              s4 = [s4, s5, s6, s7];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parseWS();\n        if (s4 !== peg$FAILED) {\n          if (peg$c47.test(input.charAt(peg$currPos))) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c48); }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parseWS();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parseP4Bin();\n              if (s7 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c43(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseP4Bin();\n    }\n\n    return s0;\n  }\n\n  function peg$parseP4Bin() {\n    var s0, s1, s2, s3, s4, s5, s6, s7;\n\n    s0 = peg$currPos;\n    s1 = peg$parsePrimary();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parseWS();\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parseDropLow();\n        if (s5 === peg$FAILED) {\n          s5 = peg$parseDropHigh();\n          if (s5 === peg$FAILED) {\n            s5 = peg$parseKeepLow();\n            if (s5 === peg$FAILED) {\n              s5 = peg$parseKeepHigh();\n              if (s5 === peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 64) {\n                  s5 = peg$c49;\n                  peg$currPos++;\n                } else {\n                  s5 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c50); }\n                }\n              }\n            }\n          }\n        }\n        if (s5 !== peg$FAILED) {\n          s6 = peg$parseWS();\n          if (s6 !== peg$FAILED) {\n            s7 = peg$parsePrimary();\n            if (s7 === peg$FAILED) {\n              s7 = null;\n            }\n            if (s7 !== peg$FAILED) {\n              s4 = [s4, s5, s6, s7];\n              s3 = s4;\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parseWS();\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseDropLow();\n          if (s5 === peg$FAILED) {\n            s5 = peg$parseDropHigh();\n            if (s5 === peg$FAILED) {\n              s5 = peg$parseKeepLow();\n              if (s5 === peg$FAILED) {\n                s5 = peg$parseKeepHigh();\n                if (s5 === peg$FAILED) {\n                  if (input.charCodeAt(peg$currPos) === 64) {\n                    s5 = peg$c49;\n                    peg$currPos++;\n                  } else {\n                    s5 = peg$FAILED;\n                    if (peg$silentFails === 0) { peg$fail(peg$c50); }\n                  }\n                }\n              }\n            }\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parseWS();\n            if (s6 !== peg$FAILED) {\n              s7 = peg$parsePrimary();\n              if (s7 === peg$FAILED) {\n                s7 = null;\n              }\n              if (s7 !== peg$FAILED) {\n                s4 = [s4, s5, s6, s7];\n                s3 = s4;\n              } else {\n                peg$currPos = s3;\n                s3 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s3;\n              s3 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c43(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$parsePrimary();\n    }\n\n    return s0;\n  }\n\n  function peg$parseDropLow() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 7) === peg$c51) {\n      s1 = peg$c51;\n      peg$currPos += 7;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c52); }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.substr(peg$currPos, 2) === peg$c53) {\n        s1 = peg$c53;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c54); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c55();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseKeepLow() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 7) === peg$c56) {\n      s1 = peg$c56;\n      peg$currPos += 7;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c57); }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.substr(peg$currPos, 2) === peg$c58) {\n        s1 = peg$c58;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c59); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c60();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseDropHigh() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 8) === peg$c61) {\n      s1 = peg$c61;\n      peg$currPos += 8;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c62); }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.substr(peg$currPos, 2) === peg$c63) {\n        s1 = peg$c63;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c64); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c65();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseKeepHigh() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (input.substr(peg$currPos, 8) === peg$c66) {\n      s1 = peg$c66;\n      peg$currPos += 8;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c67); }\n    }\n    if (s1 === peg$FAILED) {\n      if (input.substr(peg$currPos, 2) === peg$c68) {\n        s1 = peg$c68;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c69); }\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c70();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsePrimary() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$parseValue();\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s1 = peg$c18;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c19); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseWS();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseExpression();\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseWS();\n            if (s4 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 41) {\n                s5 = peg$c20;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c21); }\n              }\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c71(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseNumbery() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$parseNumber();\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 40) {\n        s1 = peg$c18;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c19); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseWS();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseExpression();\n          if (s3 !== peg$FAILED) {\n            s4 = peg$parseWS();\n            if (s4 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 41) {\n                s5 = peg$c20;\n                peg$currPos++;\n              } else {\n                s5 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c21); }\n              }\n              if (s5 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c71(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseValue() {\n    var s0;\n\n    s0 = peg$parseSet();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parseCloud();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parseCall();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parseNumber();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parseString();\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseSet() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 123) {\n      s1 = peg$c72;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c73); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseWS();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseExpression();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parseWS();\n          if (s4 !== peg$FAILED) {\n            s5 = [];\n            s6 = peg$currPos;\n            s7 = peg$parseWS();\n            if (s7 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 44) {\n                s8 = peg$c23;\n                peg$currPos++;\n              } else {\n                s8 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c24); }\n              }\n              if (s8 !== peg$FAILED) {\n                s9 = peg$parseWS();\n                if (s9 !== peg$FAILED) {\n                  s10 = peg$parseExpression();\n                  if (s10 !== peg$FAILED) {\n                    s11 = peg$parseWS();\n                    if (s11 !== peg$FAILED) {\n                      s7 = [s7, s8, s9, s10, s11];\n                      s6 = s7;\n                    } else {\n                      peg$currPos = s6;\n                      s6 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s6;\n                    s6 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s6;\n                  s6 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s6;\n                s6 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s6;\n              s6 = peg$FAILED;\n            }\n            while (s6 !== peg$FAILED) {\n              s5.push(s6);\n              s6 = peg$currPos;\n              s7 = peg$parseWS();\n              if (s7 !== peg$FAILED) {\n                if (input.charCodeAt(peg$currPos) === 44) {\n                  s8 = peg$c23;\n                  peg$currPos++;\n                } else {\n                  s8 = peg$FAILED;\n                  if (peg$silentFails === 0) { peg$fail(peg$c24); }\n                }\n                if (s8 !== peg$FAILED) {\n                  s9 = peg$parseWS();\n                  if (s9 !== peg$FAILED) {\n                    s10 = peg$parseExpression();\n                    if (s10 !== peg$FAILED) {\n                      s11 = peg$parseWS();\n                      if (s11 !== peg$FAILED) {\n                        s7 = [s7, s8, s9, s10, s11];\n                        s6 = s7;\n                      } else {\n                        peg$currPos = s6;\n                        s6 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s6;\n                      s6 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s6;\n                    s6 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s6;\n                  s6 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s6;\n                s6 = peg$FAILED;\n              }\n            }\n            if (s5 !== peg$FAILED) {\n              if (input.charCodeAt(peg$currPos) === 125) {\n                s6 = peg$c74;\n                peg$currPos++;\n              } else {\n                s6 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c75); }\n              }\n              if (s6 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c76(s3, s5);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseCloud() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parseDie();\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c77(s1);\n    }\n    s0 = s1;\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$parseNumbery();\n      if (s1 !== peg$FAILED) {\n        s2 = peg$parseWS();\n        if (s2 !== peg$FAILED) {\n          s3 = peg$parseDie();\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c78(s1, s3);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        s1 = peg$parseNumbery();\n        if (s1 !== peg$FAILED) {\n          s2 = peg$parseWS();\n          if (s2 !== peg$FAILED) {\n            if (input.charCodeAt(peg$currPos) === 100) {\n              s3 = peg$c79;\n              peg$currPos++;\n            } else {\n              s3 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c80); }\n            }\n            if (s3 !== peg$FAILED) {\n              s4 = peg$parseWS();\n              if (s4 !== peg$FAILED) {\n                s5 = peg$parseSet();\n                if (s5 !== peg$FAILED) {\n                  peg$savedPos = s0;\n                  s1 = peg$c81(s1, s5);\n                  s0 = s1;\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n        if (s0 === peg$FAILED) {\n          s0 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 100) {\n            s1 = peg$c79;\n            peg$currPos++;\n          } else {\n            s1 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c80); }\n          }\n          if (s1 !== peg$FAILED) {\n            s2 = peg$parseWS();\n            if (s2 !== peg$FAILED) {\n              s3 = peg$parseSet();\n              if (s3 !== peg$FAILED) {\n                peg$savedPos = s0;\n                s1 = peg$c82(s3);\n                s0 = s1;\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseDie() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 100) {\n      s1 = peg$c79;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c80); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parseNumbery();\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c83(s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.substr(peg$currPos, 2) === peg$c84) {\n        s1 = peg$c84;\n        peg$currPos += 2;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c85); }\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c86();\n      }\n      s0 = s1;\n      if (s0 === peg$FAILED) {\n        s0 = peg$currPos;\n        if (input.substr(peg$currPos, 2) === peg$c87) {\n          s1 = peg$c87;\n          peg$currPos += 2;\n        } else {\n          s1 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c88); }\n        }\n        if (s1 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c89();\n        }\n        s0 = s1;\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parseNumber() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$currPos;\n    if (peg$c90.test(input.charAt(peg$currPos))) {\n      s3 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s3 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c91); }\n    }\n    if (s3 === peg$FAILED) {\n      s3 = null;\n    }\n    if (s3 !== peg$FAILED) {\n      s4 = [];\n      if (peg$c92.test(input.charAt(peg$currPos))) {\n        s5 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s5 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c93); }\n      }\n      if (s5 !== peg$FAILED) {\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          if (peg$c92.test(input.charAt(peg$currPos))) {\n            s5 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s5 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c93); }\n          }\n        }\n      } else {\n        s4 = peg$FAILED;\n      }\n      if (s4 !== peg$FAILED) {\n        s3 = [s3, s4];\n        s2 = s3;\n      } else {\n        peg$currPos = s2;\n        s2 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s2;\n      s2 = peg$FAILED;\n    }\n    if (s2 !== peg$FAILED) {\n      s1 = input.substring(s1, peg$currPos);\n    } else {\n      s1 = s2;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c94(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseEscapeSequence() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    if (peg$c95.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c96); }\n    }\n    if (s1 !== peg$FAILED) {\n      if (peg$c97.test(input.charAt(peg$currPos))) {\n        s2 = input.charAt(peg$currPos);\n        peg$currPos++;\n      } else {\n        s2 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c98); }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c71(s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseString() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    if (input.charCodeAt(peg$currPos) === 34) {\n      s1 = peg$c9;\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c10); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parseEscapeSequence();\n      if (s3 === peg$FAILED) {\n        s3 = peg$currPos;\n        if (peg$c11.test(input.charAt(peg$currPos))) {\n          s4 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s4 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c12); }\n        }\n        if (s4 !== peg$FAILED) {\n          s3 = input.substring(s3, peg$currPos);\n        } else {\n          s3 = s4;\n        }\n        if (s3 === peg$FAILED) {\n          s3 = peg$currPos;\n          if (input.charCodeAt(peg$currPos) === 32) {\n            s4 = peg$c99;\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c100); }\n          }\n          if (s4 !== peg$FAILED) {\n            s3 = input.substring(s3, peg$currPos);\n          } else {\n            s3 = s4;\n          }\n        }\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parseEscapeSequence();\n        if (s3 === peg$FAILED) {\n          s3 = peg$currPos;\n          if (peg$c11.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c12); }\n          }\n          if (s4 !== peg$FAILED) {\n            s3 = input.substring(s3, peg$currPos);\n          } else {\n            s3 = s4;\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 32) {\n              s4 = peg$c99;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c100); }\n            }\n            if (s4 !== peg$FAILED) {\n              s3 = input.substring(s3, peg$currPos);\n            } else {\n              s3 = s4;\n            }\n          }\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 34) {\n          s3 = peg$c9;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c10); }\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c101(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      if (input.charCodeAt(peg$currPos) === 39) {\n        s1 = peg$c102;\n        peg$currPos++;\n      } else {\n        s1 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c103); }\n      }\n      if (s1 !== peg$FAILED) {\n        s2 = [];\n        s3 = peg$parseEscapeSequence();\n        if (s3 === peg$FAILED) {\n          s3 = peg$currPos;\n          if (peg$c104.test(input.charAt(peg$currPos))) {\n            s4 = input.charAt(peg$currPos);\n            peg$currPos++;\n          } else {\n            s4 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c105); }\n          }\n          if (s4 !== peg$FAILED) {\n            s3 = input.substring(s3, peg$currPos);\n          } else {\n            s3 = s4;\n          }\n          if (s3 === peg$FAILED) {\n            s3 = peg$currPos;\n            if (input.charCodeAt(peg$currPos) === 32) {\n              s4 = peg$c99;\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c100); }\n            }\n            if (s4 !== peg$FAILED) {\n              s3 = input.substring(s3, peg$currPos);\n            } else {\n              s3 = s4;\n            }\n          }\n        }\n        while (s3 !== peg$FAILED) {\n          s2.push(s3);\n          s3 = peg$parseEscapeSequence();\n          if (s3 === peg$FAILED) {\n            s3 = peg$currPos;\n            if (peg$c104.test(input.charAt(peg$currPos))) {\n              s4 = input.charAt(peg$currPos);\n              peg$currPos++;\n            } else {\n              s4 = peg$FAILED;\n              if (peg$silentFails === 0) { peg$fail(peg$c105); }\n            }\n            if (s4 !== peg$FAILED) {\n              s3 = input.substring(s3, peg$currPos);\n            } else {\n              s3 = s4;\n            }\n            if (s3 === peg$FAILED) {\n              s3 = peg$currPos;\n              if (input.charCodeAt(peg$currPos) === 32) {\n                s4 = peg$c99;\n                peg$currPos++;\n              } else {\n                s4 = peg$FAILED;\n                if (peg$silentFails === 0) { peg$fail(peg$c100); }\n              }\n              if (s4 !== peg$FAILED) {\n                s3 = input.substring(s3, peg$currPos);\n              } else {\n                s3 = s4;\n              }\n            }\n          }\n        }\n        if (s2 !== peg$FAILED) {\n          if (input.charCodeAt(peg$currPos) === 39) {\n            s3 = peg$c102;\n            peg$currPos++;\n          } else {\n            s3 = peg$FAILED;\n            if (peg$silentFails === 0) { peg$fail(peg$c103); }\n          }\n          if (s3 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c101(s2);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    }\n\n    return s0;\n  }\n\n\n    function math(l,o) {\n       let v = l;\n       for (let i = 0; i < o.length; i++) {\n         v = {type: 'math', right: o[i][3] || 1, left: v};\n         if (typeof(o[i][1]) == \"string\") v.op = o[i][1];\n         else Object.assign(v, o[i][1]);\n       }\n       return v;\n    }\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n","module.exports = `\n\n{\n  function math(l,o) {\n     let v = l;\n     for (let i = 0; i < o.length; i++) {\n       v = {type: 'math', right: o[i][3] || 1, left: v};\n       if (typeof(o[i][1]) == \"string\") v.op = o[i][1];\n       else Object.assign(v, o[i][1]);\n     }\n     return v;\n  }\n}\n\nstart =\n  b:Block WS { return b; } /\n  e:Expression WS? { return {\n    type: 'block',\n    body: [{type: 'output', expression: e, name: text()}]\n  }; }\n\nBlock = e:(WS Statement)+ { return {\n  type: 'block',\n  body: e.map(v => v[1]) }; }\n\nStatement = OutputStatement\n\nOutputStatement = 'output' WS e:OutputExpression { return {type: 'output', expression: e[0], text: e[1], name: e[2]}; }\nOutputExpression = e:Expression n:Named? { return [e, text(), n] }\n\nNamed = WS 'named' WS '\"' s:$([^\"]+) '\"' { return s }\n\nWS = [ \\\\n\\\\t\\\\r]*\nExpression = P1Bin / Value\n\nCall = \n  n:$([a-z]+) WS '(' WS ')' { return {type: 'call', name:n, args:[]}; } /\n  n:$([a-z]+) WS '(' WS e:Expression WS o:(',' WS Expression WS)* ')' {\n    let a = [e];\n    for ( let b of o ) a.push(b[2]);\n    return {type: 'call', name:n, args:a}; \n  }\n\n\nCompare = m:$('cs' / 'ms' / 'ro' / 'zu')? o:$([<>]'='?/'=='/'!='/'=') { return m ? {m: m, op: o} : {op: o}; }\n\nP1Bin = l:P2Bin o:(WS e:Compare WS r:P2Bin)* { return math(l,o) } / P2Bin\nP2Bin = l:P3Bin o:(WS e:[+-] WS r:P3Bin)* { return math(l,o); } / P3Bin\nP3Bin = l:P4Bin o:(WS e:[*/] WS r:P4Bin)* { return math(l,o) } / P4Bin\nP4Bin = \n  l:Primary o:(WS e:(DropLow/DropHigh/KeepLow/KeepHigh/'@') WS r:Primary?)* { return math(l,o) } /\n  Primary\n\nDropLow = ('droplow' / 'dl') { return 'dl'; } \nKeepLow = ('keeplow' / 'kl') { return 'kl'; } \nDropHigh = ('drophigh' / 'dh') { return 'dh'; } \nKeepHigh = ('keephigh' / 'kh') { return 'kh'; } \n\nPrimary = Value / '(' WS e:Expression WS ')' { return e }\nNumbery = Number / '(' WS e:Expression WS ')' { return e }\n\nValue =  Set / Cloud / Call / Number / String\n\nSet = '{' WS f:Expression WS e:(WS ',' WS Expression WS)* '}' {\n  let elements = [f];\n  for (let i = 0; i < e.length; i++) {\n    elements.push(e[i][3]);\n  }\n  return {type: 'set', elements: elements };\n}\n\n\nCloud = \n\td:Die {\n    //return { type: 'set', elements: [d] };\n    return d;\n  } /\n  n:Numbery WS d:Die { \n    if (n === 1) return d;\n    return { type: 'die', times: n, sides: d.sides }\n  } /\n  n:Numbery WS 'd' WS d:Set {\n    return { type: 'die', times: n, sides: d };\n  } /\n  'd' WS d:Set {\n    return { type: 'die', sides: d };\n  }\n\nDie =\n  'd' n:Numbery { return {type: 'die', sides: n}; } /\n  'd%' { return {type: 'die', sides: 100}; } /\n  'dF' { return {type: 'die', sides: { type: 'set', elements: [-1, 0, 1] } }; }\n \n\nNumber = d:$([-]?[0-9]+) { return parseInt(d); }\n\nEscapeSequence = [\\\\\\\\] e:[\"'] { return e }\nString = \n  '\"' v:(EscapeSequence / $[^\"] / $' ')* '\"' { return { type: 'string', value:  v.join('')}} /\n  \"'\" v:(EscapeSequence / $[^'] / $' ')* \"'\" { return { type: 'string', value:  v.join('')}}\n\n\n`;\n","const {\n  SetValue,\n  NumberValue,\n  CloudBuilder,\n  ksort,\n  ntimes,\n  StringValue,\n} = require(\"./values\");\n\nlet arity = (fn, n) => {\n  if (fn.arguments.length != n)\n    throw new Error(\n      `Function '${fn.name}' expets ${n} argument${n > 1 ? \"s\" : \"\"}`\n    );\n};\n\n/**\n * Add the elements of each set together into a single field.\n * @param  {...Value} args\n * @returns\n * @example <kbd>sum(1, 2, 3)</kbd> = <kbd>6</kbd>\n * @example <kbd>sum(1, d6, 3d6)</kbd> = <kbd>4d6+1</kbd>\n */\nfunction sum(...args) {\n  return new SetValue([new SetValue(args)], true);\n}\n\n/**\n * Add the elements of each set to one big set.\n * @param  {...Value} args\n * @returns\n * @example <kbd>bag(3d6, 2d6, {d6, d6, d6})</kbd> = <kbd>8d6</kbd>\n */\nfunction bag(...args) {\n  return new SetValue(args);\n}\n\n/**\n * Create a set containing the arguments.\n * @param  {...Value} args\n * @returns\n * @example <kbd>set(3d6, 2d6)</kbd> = <kbd>{3d6, 2d6}</kbd>\n */\nfunction set(...args) {\n  return new SetValue(args, true);\n}\n/**\n * Find the maximum possible outcome in a field.\n * @param {*} v\n * @returns\n * @example <kbd>max(d6)</kbd> = 6\n * @example <kbd>max(3d6)</kbd> = 18\n */\nfunction max(v) {\n  arity(this, 1);\n  let vs1 = v.denseCloud().values;\n  vs1.sort((a, b) => ksort(a.k, b.k));\n  return new NumberValue(vs1[0].k[0]);\n}\n\n/**\n * Find the minimum possible outcome in a field.\n * @param {*} v\n * @returns\n * @example <kbd>min(d6)</kbd> = 1\n * @example <kbd>min(3d6)</kbd> = 2\n */\nfunction min(v) {\n  arity(this, 1);\n  let vs2 = v.denseCloud().values;\n  vs2.sort((b, a) => ksort(a.k, b.k));\n  return new NumberValue(vs2[0].k[0]);\n}\n\n/**\n * Find the mean outcome in a field.\n * @param {*} v\n * @returns\n * @example <kbd>mean(d6)</kbd> = 3.5\n * @example <kbd>mean(3d6)</kbd> = 9.6\n */\nfunction mean(v) {\n  arity(this, 1);\n  let vs2 = v.denseCloud();\n  return new NumberValue(vs2.sum / vs2.total);\n}\n\n/**\n * A set containing the elment `cloud` repeated `times` times.\n * @param {*} what\n * @param {*} times\n * @returns\n * @example <kbd>repeat(d6, 3)</kbd> = <kbd>3d6</kbd>\n */\nfunction repeat(a, b) {\n  arity(this, 2);\n  return ntimes(b, a, true);\n}\n\nfunction explode(...args) {\n  let vs = args[0].denseCloud().values;\n  vs.sort((a, b) => ksort(a.k, b.k));\n  let best = vs.shift();\n  let C = new CloudBuilder();\n  let n = args.length > 1 ? args[1].value : 2;\n\n  for (let i = 0; i <= n; ++i) {\n    let extra = new Array(i).fill(best.k[0]);\n    let penalty = 1 / Math.pow(vs.length + 1, i);\n    let ls = i == n ? [].concat(vs, best) : vs;\n    for (let o of ls) {\n      let ne = [].concat(extra, o.k);\n      C.add(ne, o.w * penalty);\n    }\n  }\n  return C.done();\n}\n\n/**\n * Merge two prbability clouds weighed by condition.\n * @param  {Value} condition \n * @param  {Value} concequent\n * @param  {Value} alternate\n * @returns \n * @example <kbd>iif(d20+5&gt;12, d8+5, 0)</kbd>\n */\nfunction iif(condition, concequent, alternate) {\n  if(!condition || !concequent) throw new Error(`function iif requires a least two arguments`);\n  let parts = condition.denseCloud();\n  if (parts.values.length > 2) throw new Error(`Condition must only have two outcomes`);\n\n  let C = new CloudBuilder();\n  let i = 1;\n  console.log(\"P\", parts);\n\n  concequent = concequent || new NumberValue(0)\n  alternate = alternate || new NumberValue(0);\n\n  let cw = 0;\n  let aw = 0;\n\n  for (let o of parts.values) {\n    if (parseInt(o.k) === 1) {\n      cw = o.w;\n    }\n    else if (parseInt(o.k) === 0) {\n      aw = o.w;\n    }\n    else throw new Error(`Condition cloud must only contain 1 and 0, found ${o.k}`);\n  }\n\n  if ( aw === 0 ) return concequent;\n  if ( cw === 0 ) return alternate;\n\n  for (let v of concequent.cloud().values) {\n    C.add(v.k, v.w * cw * alternate.cloud().total, v.sources);\n  }\n  for (let v of alternate.cloud().values) {\n    C.add(v.k, v.w * aw * concequent.cloud().total, v.sources);\n  }\n\n  return C.done();\n\n}\n\n/**\n * A probability cloud follow the normal distribution from 0 to `range`\n * with mean `range/2` and standard deviation `stddev`\n * @param  {Value} range\n * @param  {Value} stddev\n * @returns\n * @example\n * <kbd>output min(3d6)+normal(max(3d6)-min(3d6),3)\n * output 3d6</kbd>\n */\nfunction normal(...args) {\n  arity(this, 2);\n  let len = args[0].number().value;\n  let stddev = args[1].number().value;\n  let nvarianceX2 = -2 * (stddev * stddev);\n  let mean = len / 2;\n\n  let C = new CloudBuilder();\n  for (let i = 0; i <= len; ++i) {\n    C.add([i], Math.exp(((i - mean) * (i - mean)) / nvarianceX2));\n  }\n\n  return C.done();\n}\n\n/**\n * Returns the field represneting the chance of getting a number of target values.\n * @param {Cloud} search\n * @param {number} target\n * @returns\n * @example <kbd>count(3d6,6)</kbd>\n */\nfunction count(cloud, t) {\n  let target = t.number().value;\n\n  return cloud.cloud().transform((v) => {\n    return new NumberValue(v.filter((x) => x == target).length).denseCloud();\n  });\n}\n\n/**\n * Returns the field represneting the chance of containing a number.\n * @param {Cloud} search\n * @param {number} target\n * @returns\n * @example <kbd>count(3d6,6)</kbd>\n */\nfunction contains(cloud, t) {\n  let target = t.number().value;\n\n  return cloud.cloud().transform((v) => {\n    return new NumberValue(v.indexOf(target) === -1 ? 0 : 1).denseCloud();\n  });\n}\n\n/**\n *\n * @param {Cloud} cloud\n * @param  {...any} args\n * @returns\n * @example <kbd>bucket(2d20kh, 'fumble', 2, 'failure', 10, 'success', 20, 'critical')</kbd>\n */\nfunction bucket(cloud, ...args) {\n  if (args.length < 3)\n    throw new Error(`bucket function expects at least 4 args`);\n  if (args.length % 2 != 1)\n    throw new Error(`bucket function expects an even number of arguments`);\n\n  return cloud.denseCloud().transform((v) => {\n    for (let i = 0; i < args.length - 1; i += 2) {\n      let target = args[i + 1].number().value;\n      if (v < target) return args[i];\n    }\n    return args[args.length - 1];\n  });\n}\n\nfunction diez(cloud) {\n  let e = cloud.cloud().values[0].sources;\n  return new StringValue(e ? e.map((x) => x.debug()).join(\",\") : \"?\");\n}\n\nmodule.exports = {\n  sum,\n  normal,\n  min,\n  max,\n  explode,\n  set,\n  bag,\n  iif,\n  repeat,\n  normal,\n  mean,\n  count,\n  contains,\n  bucket,\n  diez,\n};\n","class Output {\n  constructor(e, name = \"output\") {\n    this.expression = e;\n    this.name = name;\n  }\n  get type() {\n    return \"output\";\n  }\n  denseCloud() {\n    return this.expression.denseCloud();\n  }\n  cloud() {\n    return this.expression.cloud();\n  }\n}\n\nmodule.exports = {\n  Output,\n};\n","var map = {\n\t\"./about.md\": 206,\n\t\"./articles.md\": 207,\n\t\"./docs.md\": 208,\n\t\"./examples.md\": 209,\n\t\"./functions.md\": 210\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 205;","export default \"## About\\n\\nDicey is based on the wonderful [AnyDice](https://anydice.com/) made by [Jasper Flick](https://catlikecoding.com/jasper-flick/). The syntax has been changed somewhat, with dice notation being aligned closer to [Foundry](https://foundryvtt.com/article/dice-advanced/) and [Roll20](https://wiki.roll20.net/Dice_Reference). Dicey runs completely in the browser, and can be used offline when saved to your phone's homescreen.\\n\\nDicey is open-source under the MIT license.  Development takes place on [github](https://github.com/basicer/dicey).\\n\\n### I think I found a problem with your math.\\n\\nPlease file a bug report on the [Issue Tracker](https://github.com/basicer/dicey/issues/new).\\n\\n### Can I use Dicey in my app?\\n\\nMost likely.  There is a sub-module inside dicey called dicey-math, however the API to interact with it is still pretty rough.  It's on the todo list to clean this up.\\n\\n### Can I define functions like in [AnyDice](https://anydice.com/) or [SnakeEyes](https://snake-eyes.io/)\\n\\nNot yet.  The goal of dicey is to take dice expressions directly from various games and compute the odds declaratively.  This is something we would like to add eventually.\";","export default \"# Learn you some stuff\\n\";","export default \"## Documentation\\n\\nDicey is based on the wonderful [AnyDice](https://anydice.com/) made by [Jasper Flick](https://catlikecoding.com/jasper-flick/). The syntax has been changed somewhat, with dice notation being aligned closer to [Foundry](https://foundryvtt.com/article/dice-advanced/) and [Roll20](https://wiki.roll20.net/Dice_Reference).\\n\\n### Basics\\n\\nDicey fundamentally operates as a calculator, but instead of operating only on numbers, it can also operate on probabilties.\\n\\nAs an overly simple example, let's add two and two together. You can click on the example to load it.\\n\\n<kbd>output 2+2</kbd>\\n\\n<br /><br />\\n\\nNotice the calculation starts with the word `output`. This instructs Dicey to display the result. You can leave this out, but it's good to know about if you want to output multiple things.\\n\\n<kbd>output 2+2\\noutput 2+2\\\\*2</kbd>\\n\\n### Dice\\n\\nAs a simple example, <kbd>3d6</kbd> represents rolling three six-sided dice.\\n\\nThe arguements to the die operator aren't limited to numbers. If a <kbd>d{4,5,10}</kbd> sets is passed to the right hand argument, the elements of that set will make up the sides of the die. Similally a probaility can be used as the second arguement to give chance to roll die with that number of sides. <kbd>2d(d6)</kbd> would be analgous to rolling a d6 to determin which type of dice to pick up, and then rolling two of those types of dice.\\n\\n### Sets\\n\\nSets are formed by placing comma seperated elements between `{}`'s. For example <kbd>{3,4,5}</kbd> is a set of three numbers. By default, the elements of a set are added together and displyed as one number. This can be disabled with the `collapse` toggle at the bottom of the calculator page. Sets are by convention stored in decending order.\\n\\n&gt; <kbd>{3d6, d10} kh 1</kbd> - Take the higest roll between `3d6` and `d10`.\\n\\n## Operators\\n\\nThe standard math operators `+ - * /` are defined as normal, with standard order of operation.\\n\\nThe comparison operators `> >= < <= == !=` use the values `1` and `0` as their output instead of `true` and `false` respectively.  These operators can be modified with `cs ms ro zu` as per [Foundry Die Modifiers](https://foundryvtt.com/article/dice-modifiers/)\\n\\nThe `kl lh dl dh` binary operators also work as per [Foundry](https://foundryvtt.com/article/dice-advanced/).\\n\\n### Functions\\n\\nFunction calls are made similar to C-style languages. For example <kbd>max(d6)</kbd> represents calling the max function and passing `d6` as its only argument.\\n\\nSee the [function refrence](/functions) for a list of built-in functions.\\n\";","export default \"## Examples\";","export default \"## Function Library\\n\\n### `bag(...)`\\n\\nAdd the elements of each set to one big set.\\n\\n&gt; <kbd>bag(3d6, 2d6, {d6, d6, d6})</kbd> = <kbd>8d6</kbd>\\n\\n\\n\\n### `bucket(cloud, ...)`\\n\\n\\n\\n&gt; <kbd>bucket(2d20kh, 'fumble', 2, 'failure', 10, 'success', 20, 'critical')</kbd>\\n\\n\\n\\n### `contains(search, target)`\\n\\nReturns the field represneting the chance of containing a number.\\n\\n&gt; <kbd>count(3d6,6)</kbd>\\n\\n\\n\\n### `count(search, target)`\\n\\nReturns the field represneting the chance of getting a number of target values.\\n\\n&gt; <kbd>count(3d6,6)</kbd>\\n\\n\\n\\n### `iif(condition, concequent, alternate)`\\n\\nMerge two prbability clouds weighed by condition.\\n\\n&gt; <kbd>iif(d20+5&gt;12, d8+5, 0)</kbd>\\n\\n\\n\\n### `max(v)`\\n\\nFind the maximum possible outcome in a field.\\n\\n&gt; <kbd>max(d6)</kbd> = 6\\n\\n&gt; <kbd>max(3d6)</kbd> = 18\\n\\n\\n\\n### `mean(v)`\\n\\nFind the mean outcome in a field.\\n\\n&gt; <kbd>mean(d6)</kbd> = 3.5\\n\\n&gt; <kbd>mean(3d6)</kbd> = 9.6\\n\\n\\n\\n### `min(v)`\\n\\nFind the minimum possible outcome in a field.\\n\\n&gt; <kbd>min(d6)</kbd> = 1\\n\\n&gt; <kbd>min(3d6)</kbd> = 2\\n\\n\\n\\n### `normal(range, stddev)`\\n\\nA probability cloud follow the normal distribution from 0 to `range`\\nwith mean `range/2` and standard deviation `stddev`\\n\\n&gt; <kbd>output min(3d6)+normal(max(3d6)-min(3d6),3)\\noutput 3d6</kbd>\\n\\n\\n\\n### `repeat(what, times)`\\n\\nA set containing the elment `cloud` repeated `times` times.\\n\\n&gt; <kbd>repeat(d6, 3)</kbd> = <kbd>3d6</kbd>\\n\\n\\n\\n### `set(...)`\\n\\nCreate a set containing the arguments.\\n\\n&gt; <kbd>set(3d6, 2d6)</kbd> = <kbd>{3d6, 2d6}</kbd>\\n\\n\\n\\n### `sum(...)`\\n\\nAdd the elements of each set together into a single field.\\n\\n&gt; <kbd>sum(1, 2, 3)</kbd> = <kbd>6</kbd>\\n\\n&gt; <kbd>sum(1, d6, 3d6)</kbd> = <kbd>4d6+1</kbd>\\n\\n\\n\";","const drawerWidth = 240;\n\nconst style = (theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  active: {\n    color: \"red\",\n  },\n  toolbar: {\n    paddingRight: 24, // keep right padding when drawer closed\n  },\n  toolbarIcon: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: \"0 8px\",\n    ...theme.mixins.toolbar,\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  menuButtonHidden: {\n    display: \"none\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  drawerPaper: {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9),\n    },\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\",\n  },\n  container: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\",\n  },\n  muted: {\n    color: theme.palette.text.secondary,\n    textDecoration: \"none\",\n  },\n  fixedHeight: {\n    height: 240,\n  },\n  rightButton: {\n    float: \"right\",\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n  filler: {\n    height: \"100%\",\n    position: \"relative\",\n  },\n  byline: {\n    position: \"absolute\",\n    bottom: 5,\n    textAlign: \"center\",\n    width: \"100%\",\n  },\n});\n\nexport default style;","import React from \"react\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport clsx from \"clsx\";\n\nimport styles from \"../styles\";\n\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { NavLink as RouterLink } from \"react-router-dom\";\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListItemSecondaryAction,\n  //Switch,\n  AccountTreeIcon,\n  Box,\n} from \"../material\";\n\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\n\n//import ListSubheader from \"@material-ui/core/ListSubheader\";\n\n//import MenuIcon from \"@material-ui/icons/Menu\";\n//import ListIcon from \"@material-ui/icons/List\";\n//import DashboardIcon from \"@material-ui/icons/Dashboard\";\n//import ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\nimport FunctionsIcon from \"@material-ui/icons/Functions\";\n//import BarChartIcon from \"@material-ui/icons/BarChart\";\n//import LayersIcon from \"@material-ui/icons/Layers\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport BallotIcon from \"@material-ui/icons/Ballot\";\n//import FindInPageIcon from \"@material-ui/icons/FindInPage\";\nimport ContactlessIcon from \"@material-ui/icons/Contactless\";\n// import ExploreIcon from \"@material-ui/icons/Explore\";\n\n//import AssignmentIcon from \"@material-ui/icons/Assignment\";\n\nconst useStyles = makeStyles(styles);\n\nexport default function Navigation({ open, handleDrawerClose }) {\n  const classes = useStyles();\n\n  let links = [\n    [\"Calculator\", \"/\", <DescriptionIcon />, { exact: true }],\n    [\"Documentation\", \"/docs\", <BallotIcon />],\n    // [\"Examples\", \"/examples\", <ExploreIcon />],\n    [\"Function Library\", \"/functions\", <FunctionsIcon />],\n    [\"About\", \"/about\", <ContactlessIcon />],\n  ];\n  return (\n    <Drawer\n      variant=\"permanent\"\n      classes={{\n        paper: clsx(classes.drawerPaper, !open && classes.drawerPaperClose),\n      }}\n      open={open}\n    >\n      <div className={classes.toolbarIcon}>\n        <IconButton onClick={handleDrawerClose}>\n          <ChevronLeftIcon />\n        </IconButton>\n      </div>\n      <Divider />\n      <List>\n        {links.map(([name, url, icon, extra = {}]) => (\n          <ListItem\n            {...extra}\n            button\n            activeClassName=\"Mui-selected\"\n            component={RouterLink}\n            key={name}\n            to={url}\n          >\n            <ListItemIcon>{icon}</ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n        <Divider />\n        {false && (\n          <ListItem>\n            <ListItemIcon>\n              <AccountTreeIcon />\n            </ListItemIcon>\n            <ListItemText primary=\"Simulator\" />\n            <ListItemSecondaryAction hidden={!open}></ListItemSecondaryAction>\n          </ListItem>\n        )}\n      </List>\n      {open && (\n        <Box className={classes.filler}>\n          <Box className={classes.byline}>\n            made by{\" \"}\n            <a className={classes.muted} href=\"http://github.com/basicer\">\n              Rob\n            </a>\n          </Box>\n        </Box>\n      )}\n    </Drawer>\n  );\n}\n","import {\n  atom,\n  selector,\n} from \"recoil\";\n\nimport { parser } from \"dicey-math\";\nimport worker from \"workerize-loader!./worker\"; // eslint-disable-line import/no-webpack-loader-syntax\n\nlet workerInstance = worker();\n\nexport let reload = atom({ key: \"reload\", default: Math.random() });\nexport let query = atom({ key: \"query\", default: \"output 3d6\" });\nexport let parsed = selector({\n  key: \"parsed\",\n  get: ({ get }) => {\n    let expression = get(query);\n    try {\n      let x = parser.parse(expression);\n      return { ok: true, v: x };\n    } catch (e) {\n      console.log(e);\n      return { ok: false, error: e };\n    }\n  },\n});\n\nexport let showReload = atom({key: \"showReload\", default: false});\nexport let waitingWorker = atom({ key: \"waitingWorker\", default: null });\n\n\nexport let collapse = atom({ key: \"collapse\", default: true });\nexport let mode = atom({ key: \"mode\", default: \"normal\" });\nexport let transpose = atom({ key: \"transpose\", default: false });\n\nlet working = false;\n\nexport let sample = atom({ key: \"sample\", default: [] });\nexport let fresh = atom({ key: \"fresh\", default: false });\nexport let sampleError = atom({ key: \" sampleError\", default: null });\nexport let activeSample = selector({\n  key: \"selector\",\n  get: async ({ get }) => {\n    let p = get(parsed);\n    let c = get(collapse);\n    let m = get(mode);\n    let t = get(transpose);\n    if (!p.ok) return false;\n\n    if (working) {\n      workerInstance.terminate();\n      workerInstance = worker();\n    } else {\n      working = true;\n    }\n\n    let result = await workerInstance.compute({\n      parsed: p,\n      collapse: c,\n      mode: m,\n      transpose: t,\n    });\n    working = false;\n    return result;\n  },\n});\n\nexport let errors = selector({\n  key: \"error\",\n  get: ({ get }) => {\n    let p = get(parsed);\n\n    if (!p.ok) {\n      console.log(p);\n      let s = `${p.error.name}: `;\n      if (p.error.location)\n        s += ` ${p.error.location.start.line}:${p.error.location.start.column}`;\n      s += ` ${p.error.message}`;\n      return s;\n    }\n\n    let se = get(sampleError);\n    if (se) return se;\n    return false;\n  },\n});\n","import { Chart as ChartComponent } from \"react-chartjs-2\";\nimport { Chart as ChartJS, LineController, LineElement, PointElement, LinearScale, Title, CategoryScale } from 'chart.js';\n\n\nimport { useTheme } from \"@material-ui/core\";\nimport { useState, useEffect } from \"react\";\n\nimport {\n  useRecoilValue,\n} from \"recoil\";\n\nimport * as state from \"../state\";\n\nChartJS.register(LineController, LineElement, PointElement, LinearScale, Title, CategoryScale);\n\n\nexport const CHART_COLORS = {\n  blue: \"rgb(54, 162, 235)\",\n  red: \"rgb(255, 99, 132)\",\n  orange: \"rgb(255, 159, 64)\",\n  yellow: \"rgb(255, 205, 86)\",\n  green: \"rgb(75, 192, 192)\",\n  purple: \"rgb(153, 102, 255)\",\n  grey: \"rgb(201, 203, 207)\",\n  black: \"rgb(0, 0, 0)\",\n};\n\nexport default function Chart() {\n  const sample = useRecoilValue(state.sample);\n  const [options, setOptions] = useState([]);\n\n  let theme = useTheme();\n  let [data, setData] = useState({ datasets: [] });\n  let [first, setFirst] = useState(true);\n\n  let className = \"\";\n\n  useEffect(() => {\n    let labels = {};\n    for (let s of sample) for (let o of s.entries) labels[o.name] = true;\n    labels = Object.keys(labels);\n    labels.sort((a, b) => parseFloat(a) - parseFloat(b));\n    const data = {\n      labels: labels,\n      datasets: sample.map((s, i) => {\n        let c =\n          sample.length === 1\n            ? theme.palette.text.primary\n            : Object.values(CHART_COLORS)[i];\n\n        return {\n          id: `data${i}`,\n          //label: s.name,\n          label: s.nameIsValue ? s.name : `output ${i + 1}`,\n          parsing: false,\n          data: labels.map((x) => {\n            // eslint-disable-next-line eqeqeq\n            let v = s.entries.find((w) => w.name == x);\n            if (v) return { x: x, y: v.uv };\n            return { x: x, y: null };\n          }),\n          fill: false,\n          backgroundColor: c,\n          borderColor: c,\n        };\n      }),\n    };\n\n    const previousY = (ctx) => {\n      if (ctx.index === 0) return ctx.chart.scales.y.getPixelForValue(100);\n\n      let meta = ctx.chart.getDatasetMeta(ctx.datasetIndex);\n\n      if (!meta.data[ctx.index - 1])\n        return ctx.chart.scales.y.getPixelForValue(100);\n\n      return meta.data[ctx.index - 1].getProps([\"y\"], true).y;\n    };\n\n    const delayBetweenPoints = 500 / labels.length;\n    const animation = {\n      x: {\n        type: \"number\",\n        easing: \"linear\",\n        duration: delayBetweenPoints,\n        from: NaN, // the point is initially skipped\n        delay(ctx) {\n          if (ctx.type !== \"data\" || ctx.xStarted) {\n            return 0;\n          }\n          ctx.xStarted = true;\n          return ctx.index * delayBetweenPoints;\n        },\n      },\n      y: {\n        type: \"number\",\n        easing: \"linear\",\n        duration: delayBetweenPoints,\n        from: previousY,\n        delay(ctx) {\n          if (ctx.type !== \"data\" || ctx.yStarted) {\n            return 0;\n          }\n          ctx.yStarted = true;\n          return ctx.index * delayBetweenPoints;\n        },\n      },\n    };\n\n    setData(data);\n\n    const options = {\n      animation: first ? animation : undefined,\n      //responsive: true,\n      maintainAspectRatio: false,\n      scales: {\n        y: {\n          min: 0,\n          ticks: {\n            color: theme.palette.text.secondary,\n            beginAtZero: true,\n            callback: function (val) {\n              return this.getLabelForValue(val) + \"%\";\n            },\n          },\n          title: { text: \"Chance\", display: false },\n        },\n        x: {\n          ticks: { beginAtZero: true, color: theme.palette.text.secondary },\n        },\n      },\n      plugins: {\n        legend: {\n          position: \"bottom\",\n          labels: { color: theme.palette.text.secondary },\n        },\n      },\n      interaction: {\n        intersect: false,\n        mode: \"index\",\n      },\n    };\n\n    setOptions(options);\n    setFirst(false);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sample, theme]);\n\n  console.log(\"CHART\", options, data);\n  return (\n    <ChartComponent\n      type=\"line\"\n      options={options}\n      data={data}\n      className={className}\n    />\n  );\n}\n","import React from \"react\";\nimport { Alert, TextField, Card, CardContent, CardActions } from \"../material\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport * as state from \"../state\";\n\nconst useStyles = makeStyles((theme) => ({\n  textbox: {\n    \"& textarea\": {\n      fontFamily: \"monospace\",\n    },\n  },\n  card: {\n    paddingBottom: 0,\n  },\n}));\n\nexport default function CalcInput() {\n  const classes = useStyles();\n  const [expression, setExpression] = useRecoilState(state.query);\n  const error = useRecoilValue(state.errors);\n\n  return (\n    <Card>\n      <CardContent className={classes.card}>\n        <TextField\n          className={classes.textbox}\n          id=\"outlined-multiline-static\"\n          label=\"Input\"\n          multiline\n          maxRows={6}\n          fullWidth\n          value={expression}\n          error={!!error}\n          onChange={(e) => setExpression(e.target.value)}\n          variant=\"outlined\"\n        />\n      </CardContent>\n      <CardActions>\n        {error ? <Alert severity=\"error\">{error}</Alert> : null}\n      </CardActions>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport {\n  Paper,\n  TableContainer,\n  TableCell,\n  TableBody,\n  TableHead,\n  TableRow,\n  Table,\n} from \"../material\";\n\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport {\n  useRecoilValue,\n} from \"recoil\";\n\nimport * as state from \"../state\";\n\nconst useStyles = makeStyles((theme) => ({\n  chony: { width: \"100%\" },\n  tableContainer: { maxHeight: 650 },\n  pre: { whiteSpace: \"nowrap\" },\n  veryDense: {\n    \"& td\": { paddingTop: 2, paddingBottom: 2 },\n    \"& th\": { paddingTop: 2, paddingBottom: 2 },\n  },\n  bar: {\n    transition: \"width 0.5s\",\n    borderRadius: 4,\n  },\n}));\n\nexport default function CalcTable() {\n  let sample = useRecoilValue(state.sample);\n  const theme = useTheme();\n  const classes = useStyles();\n  return (\n    <>\n      {sample.map((table, idx) => (\n        <TableContainer\n          key={idx}\n          component={Paper}\n          className={classes.tableContainer}\n        >\n          <Table aria-label=\"simple table\" stickyHeader size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Value</TableCell>\n                <TableCell align=\"center\">%</TableCell>\n                <TableCell align=\"center\" className={classes.chony}>\n                  {table.name}\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {table.entries.map((row, rowid) => (\n                <TableRow key={row.name} className={classes.veryDense}>\n                  <TableCell\n                    key={rowid}\n                    component=\"th\"\n                    scope=\"row\"\n                    className={classes.pre}\n                  >\n                    {row.name}\n                  </TableCell>\n                  <TableCell align=\"right\">{row.uv.toFixed(2)}%</TableCell>\n                  <TableCell align=\"left\">\n                    <div\n                      className={classes.bar}\n                      style={{\n                        display: \"inline-block\",\n                        width: `${row.uv}%`,\n                        lineHeight: 1.3,\n                        backgroundColor: theme.palette.text.primary,\n                      }}\n                    >\n                      &nbsp;\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      ))}\n    </>\n  );\n}\n","import React from \"react\";\nimport {\n  Switch,\n  Radio,\n  RadioGroup,\n  FormControl,\n  FormControlLabel,\n  Select,\n  MenuItem,\n} from \"../material\";\n\nimport {\n  useRecoilState,\n} from \"recoil\";\n\nimport * as state from \"../state\";\n\nexport default function OptionBar() {\n  const [collapse, setCollapse] = useRecoilState(state.collapse);\n  const [transpose, setTranspose] = useRecoilState(state.transpose);\n  const [mode, setMode] = useRecoilState(state.mode);\n\n  let select = (\n    <RadioGroup\n      row\n      aria-label=\"position\"\n      name=\"position\"\n      defaultValue=\"normal\"\n      onChange={(e, v) => setMode(v)}\n    >\n      <FormControlLabel\n        value=\"normal\"\n        control={<Radio color=\"primary\" />}\n        label=\"Normal\"\n      />\n      <FormControlLabel\n        value=\"atleast\"\n        control={<Radio color=\"primary\" />}\n        label=\"At Least\"\n      />\n      <FormControlLabel\n        value=\"atmost\"\n        control={<Radio color=\"primary\" />}\n        label=\"At Most\"\n      />\n    </RadioGroup>\n  );\n\n  void select;\n\n  return (\n    <>\n      <FormControl variant=\"standard\">\n        <Select value={mode} onChange={(e) => setMode(e.target.value)}>\n          <MenuItem value=\"normal\">Normal</MenuItem>\n          <MenuItem value=\"atleast\">At Least</MenuItem>\n          <MenuItem value=\"atmost\">At Most</MenuItem>\n        </Select>\n      </FormControl>\n\n      <FormControlLabel\n        control={\n          <Switch\n            checked={collapse}\n            onChange={(e) => setCollapse(e.target.checked)}\n            name=\"checkedB\"\n            color=\"primary\"\n          />\n        }\n        label=\"Collapse\"\n      />\n\n      <FormControlLabel\n        control={\n          <Switch\n            checked={transpose}\n            onChange={(e) => setTranspose(e.target.checked)}\n            name=\"checkedB\"\n            color=\"primary\"\n          />\n        }\n        label=\"Transpose\"\n      />\n    </>\n  );\n}\n","import React, { useState, useEffect, Suspense } from \"react\";\nimport {\n  Alert,\n  Paper,\n  TextField,\n  AppBar,\n  Tabs,\n  Tab,\n  Box,\n  Button,\n  Toolbar,\n  Typography,\n  Card,\n  CardActions,\n} from \"../material\";\nimport { useLocation } from \"react-router-dom\";\nimport Chart from \"./Chart\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { debug } from \"dicey-math\";\nimport {\n  useRecoilState,\n  useRecoilValue,\n  useRecoilStateLoadable,\n  useSetRecoilState,\n} from \"recoil\";\n\nimport CalcInput from \"./CalcInput\";\nimport CalcTable from \"./CalcTable\";\nimport OptionBar from \"./OptionBar\";\n\nimport * as state from \"../state\";\n\n\nfunction rollOn(l) {\n  let acc = 100 * Math.random();\n  for (let v of l) {\n    acc -= parseFloat(v.uv);\n    if (acc <= 0) return v.name;\n  }\n  return \"?\";\n}\n\nclass SilentErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    console.log(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <div>Error</div>;\n    }\n\n    return this.props.children;\n  }\n}\n\nconst useStyles = makeStyles((theme) => ({\n  doc: { padding: theme.spacing(2) },\n  chart: {\n    height: \"calc(100vh - 350px)\",\n    minHeight: 300,\n    \"& div\": { height: \"100%\" },\n  },\n  pre: { whiteSpace: \"nowrap\" },\n  paper: { position: \"relative\" },\n  freshness: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: \"black\",\n    zIndex: 10000,\n    opacity: 0.5,\n  },\n  textbox: {\n    \"& textarea\": {\n      fontFamily: \"monospace\",\n    },\n  },\n  bar: {\n    marginTop: theme.spacing(1),\n    paddingLeft: theme.spacing(1),\n  },\n}));\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </div>\n  );\n}\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction SampleCacher() {\n  const reload = useRecoilValue(state.reload);\n  const [sample, setSample] = useRecoilState(state.sample);\n  const setFresh = useSetRecoilState(state.fresh);\n  const setSampleError = useSetRecoilState(state.sampleError);\n  const [activeSample] = useRecoilStateLoadable(state.activeSample);\n  useEffect(() => {\n    if (activeSample.state === \"hasError\") {\n      setFresh(false);\n      setSampleError(activeSample.contents.message);\n      return;\n    }\n    if (activeSample.state !== \"hasValue\") {\n      setFresh(false);\n      setSampleError(false);\n      return;\n    }\n    if (activeSample.contents === false) {\n      setFresh(false);\n      setSampleError(false);\n      return;\n    }\n    setFresh(true);\n    if (sample !== activeSample.contents) {\n      setSample(activeSample.contents);\n    }\n    setSampleError(false);\n  }, [activeSample, sample, setSampleError, setFresh, setSample, reload]);\n\n  return <></>;\n}\n\nfunction ExportWrapper() {\n  const classes = useStyles();\n  const sample = useRecoilValue(state.sample);\n\n  let exportText = sample\n    .map((s) => {\n      return (\n        `${s.name}\\n` +\n        \"#,%\\n\" +\n        sample[0].entries\n          .map((x) => {\n            return `${x.name},${x.uv}`;\n          })\n          .join(\"\\n\")\n      );\n    })\n    .join(\"\\n\\n\");\n\n  return (\n    <TextField\n      className={classes.textbox}\n      label=\"Export\"\n      readOnly={true}\n      multiline\n      rows={20}\n      fullWidth\n      value={exportText}\n      variant=\"outlined\"\n    />\n  );\n}\n\nfunction RollContainer() {\n  const sample = useRecoilValue(state.sample);\n  const [roll, setRoll] = useState(\"--\");\n  return (\n    <>\n      {roll ? (\n        <Typography variant=\"h1\" component=\"h2\" gutterBottom>\n          {roll}\n        </Typography>\n      ) : null}\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() => setRoll(rollOn(sample[0].raw))}\n      >\n        Roll\n      </Button>\n    </>\n  );\n}\n\nfunction Freshness() {\n  const classes = useStyles();\n  let fresh = useRecoilValue(state.fresh);\n  return (\n    <div\n      className={classes.freshness}\n      style={{ display: fresh ? \"none\" : \"block\" }}\n    ></div>\n  );\n}\n\nfunction CalcResult() {\n  const classes = useStyles();\n  const [tabValue, handleTabChange] = useState(0);\n\n  return (\n    <Paper className={classes.paper}>\n      <Freshness />\n      <AppBar position=\"static\">\n        <Toolbar variant=\"dense\">\n          <Tabs\n            value={tabValue}\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            onChange={(e, v) => handleTabChange(v)}\n            aria-label=\"simple tabs example\"\n          >\n            <Tab label=\"Table\" {...a11yProps(0)} />\n            <Tab label=\"Graph\" {...a11yProps(1)} />\n            <Tab label=\"Export\" {...a11yProps(2)} />\n            <Tab label=\"Roller\" {...a11yProps(4)} />\n          </Tabs>\n        </Toolbar>\n      </AppBar>\n      <TabPanel value={tabValue} index={0}>\n        <CalcTable />\n      </TabPanel>\n      <TabPanel value={tabValue} index={1} className={classes.chart}>\n        <Chart />\n      </TabPanel>\n      <TabPanel value={tabValue} index={2}>\n        <ExportWrapper />\n      </TabPanel>\n      <TabPanel value={tabValue} index={3}>\n        <RollContainer />\n      </TabPanel>\n    </Paper>\n  );\n}\n\nfunction ZAlert() {\n  const parsed = useRecoilValue(state.parsed);\n  return (\n    <Alert severity=\"info\" style={{ fontFamily: \"monospace\" }}>\n      {parsed.v ? debug(parsed.v) : \"\"}\n    </Alert>\n  );\n}\n\nexport default function Calculate() {\n  const classes = useStyles();\n  const q = useQuery();\n  const [didLoadQuery, setDidLoadQuery] = useState(false);\n  const setQuery = useSetRecoilState(state.query);\n\n  if (q.get(\"input\") && !didLoadQuery) {\n    setTimeout(() => {\n      setQuery(q.get(\"input\"));\n      setDidLoadQuery(true);\n    });\n  }\n\n  return (\n    <>\n      <CalcInput />\n      <Card className={classes.bar}>\n        <CardActions>\n          <OptionBar />\n        </CardActions>\n      </Card>\n      <SilentErrorBoundary>\n        <Suspense>\n          <SampleCacher />\n        </Suspense>\n      </SilentErrorBoundary>\n      <br />\n      <SilentErrorBoundary>\n        <React.Suspense fallback={<div>Loading...</div>}>\n          {\" \"}\n          <CalcResult />\n        </React.Suspense>\n      </SilentErrorBoundary>\n      <br />\n\n      <br />\n      <ZAlert />\n    </>\n  );\n}\n","import React from \"react\";\nimport { NavLink as RouterLink } from \"react-router-dom\";\nimport {\n  Paper,\n  Link,\n  Typography,\n  Backdrop,\n  CircularProgress,\n  Button,\n} from \"../material\";\n\nimport Markdown from \"markdown-to-jsx\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  doc: { padding: theme.spacing(2) },\n  h1: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h2: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h3: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h4: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h5: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h6: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  p: { paddingBottom: theme.spacing(2) },\n  code: {\n    display: \"inline\",\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(0.5),\n  },\n  example: {\n    fontFamily: \"monospace\",\n    whiteSpace: \"pre\",\n    textTransform: \"none\",\n  },\n}));\n\nexport function Example({ children }) {\n  const classes = useStyles();\n  let uri = `/?input=${encodeURIComponent(children ? children[0] : \"\")}`;\n\n  return (\n    <Button\n      component={RouterLink}\n      size=\"small\"\n      to={uri}\n      color=\"primary\"\n      variant=\"contained\"\n      className={classes.example}\n    >\n      {children}\n    </Button>\n  );\n}\n\nexport default function Docs({ markdown }) {\n  const classes = useStyles();\n\n  let options = {\n    overrides: {\n      h1: {\n        component: Typography,\n        props: { variant: \"h3\", className: classes.h1 },\n      },\n      h2: {\n        component: Typography,\n        props: { variant: \"h4\", className: classes.h2 },\n      },\n      h3: {\n        component: Typography,\n        props: { variant: \"h5\", className: classes.h3 },\n      },\n      h4: {\n        component: Typography,\n        props: { variant: \"h6\", className: classes.h4 },\n      },\n      p: {\n        component: Typography,\n        props: { variant: \"body1\", className: classes.p },\n      },\n      a: { component: Link },\n      li: { component: Typography, props: { component: \"li\" } },\n      code: { component: \"code\", props: { className: classes.code } },\n      kbd: { component: Example },\n    },\n  };\n\n  return (\n    <>\n    <Paper className={classes.doc}>\n      {typeof markdown == \"string\" && (\n        <Markdown options={options}>{markdown}</Markdown>\n      )}\n      {markdown === false && (\n        <Backdrop className={classes.backdrop}>\n          <CircularProgress size=\"200px\" />\n        </Backdrop>\n      )}\n    </Paper>\n    <div className={classes.muted}>{process.env.REACT_APP_GIT_SHA || '-'}</div>\n    </>\n  );\n}\n","import React, { Suspense, useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport { BrowserRouter, Route, Switch, useHistory, useLocation } from \"react-router-dom\";\nimport { blue, pink } from \"@material-ui/core/colors\";\nimport {\n  makeStyles,\n  ThemeProvider,\n  darken,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\n\nimport {\n  useRecoilState,\n  useRecoilValue,\n} from \"recoil\";\n\nimport Navigation from \"./components/Navigation\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\n\nimport styles from \"./styles\";\n\nimport {\n  //  Alert,\n  //  Snackbar,\n  AppBar,\n  Toolbar,\n  IconButton,\n  MenuIcon,\n  Typography,\n  //  SettingsIcon,\n  InvertColorsIcon,\n  //  AccountCircleIcon,\n  Container,\n  //  Grid,\n  //  Dialog,\n  CircularProgress,\n  Backdrop,\n  Snackbar,\n  Button,\n  //  Badge,\n  //  NotificationsIcon,\n  //  Menu,\n  //  MenuItem,\n  //  MenuList,\n  //  ListItemIcon,\n  //  LockIcon,\n  //  FormControlLabel,\n} from \"./material\";\n\nimport Calculate from \"./components/Calculate\";\nimport Docs from \"./components/Doc\";\n\nimport * as state from \"./state\";\n\nlet dox = require.context(\"!raw-loader!./docs\", false, /\\.md$/);\nconst useStyles = makeStyles(styles);\n\nexport function Analytics() {\n\n  const location = useLocation();\n\n  useEffect(() => {\n    if (!process.env.REACT_APP_GA_UA) return;\n\n    import('react-ga').then((ReactGA) => {\n      ReactGA.initialize(process.env.REACT_APP_GA_UA);\n      ReactGA.pageview(location.pathname + location.search);\n    });\n  }, [location]);\n\n  return null;\n}\n\nexport default function App() {\n  const classes = useStyles();\n  const isDark = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  let [paletteType, setPaletType] = useState(undefined);\n\n  paletteType = paletteType || (isDark ? \"dark\" : \"light\");\n\n  const theme = React.useMemo(() => {\n    const nextTheme = createMuiTheme({\n      palette: {\n        primary: {\n          main: paletteType === \"light\" ? blue[700] : blue[200],\n        },\n        secondary: {\n          main: paletteType === \"light\" ? darken(pink.A400, 0.1) : pink[200],\n        },\n        type: paletteType,\n        background: {\n          //default: paletteType === 'light' ? '#fff' : '#121212',\n        },\n      },\n    });\n\n    return nextTheme;\n  }, [paletteType]);\n\n  const history = useHistory();\n  if (localStorage.redirect) {\n    history.replace(localStorage.redirect);\n    delete localStorage.redirect;\n  }\n\n  // const [settingsOpen, setSettingsOpen] = React.useState(false);\n\n  const [open, setOpen] = React.useState(undefined);\n  const shouldStartClosed = useMediaQuery(theme.breakpoints.up(\"md\"));\n  let amOpen = typeof open === \"undefined\" ? shouldStartClosed : open;\n\n  // const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  const [showReload, setShowReload] = useRecoilState(state.showReload);\n  const waitingWorker = useRecoilValue(state.waitingWorker);\n  const update = () => {\n    console.log(\"UPDATE!\");\n    waitingWorker.postMessage({ type: 'SKIP_WAITING' });\n    setShowReload(false);\n    window.location.reload(true);\n  };\n\n  return (\n    <>\n      <ThemeProvider theme={theme}>\n        <BrowserRouter>\n          <div className={classes.root}>\n            <CssBaseline />\n            <Snackbar \n              message=\"A new version of the app is available!\"\n              action={\n                <Button onClick={update} color=\"inherit\" size=\"small\">\n                  Update\n                </Button>\n              }\n              open={showReload}\n              autoHideDuration={6000}\n              onClose={() => setShowReload(false)}\n            >\n            </Snackbar>\n            <AppBar\n              position=\"absolute\"\n              className={clsx(classes.appBar, amOpen && classes.appBarShift)}\n            >\n              <Toolbar className={classes.toolbar}>\n                <IconButton\n                  edge=\"start\"\n                  color=\"inherit\"\n                  aria-label=\"open drawer\"\n                  onClick={handleDrawerOpen}\n                  className={clsx(\n                    classes.menuButton,\n                    amOpen && classes.menuButtonHidden\n                  )}\n                >\n                  <MenuIcon />\n                </IconButton>\n                <Typography\n                  component=\"h1\"\n                  variant=\"h6\"\n                  color=\"inherit\"\n                  noWrap\n                  className={classes.title}\n                >\n                  Dicey\n                </Typography>\n\n                <IconButton\n                  color=\"inherit\"\n                  onClick={() =>\n                    setPaletType(paletteType === \"light\" ? \"dark\" : \"light\")\n                  }\n                >\n                  <InvertColorsIcon />\n                </IconButton>\n              </Toolbar>\n            </AppBar>\n            <Navigation open={amOpen} handleDrawerClose={handleDrawerClose} />\n            <main className={classes.content}>\n              <div className={classes.appBarSpacer} />\n              <Container maxWidth=\"lg\" className={classes.container}>\n                <Suspense\n                  fallback={\n                    <Backdrop className={classes.backdrop}>\n                      <CircularProgress size=\"200px\" />\n                    </Backdrop>\n                  }\n                >\n                  <Switch>\n                    <Route exact path=\"/\" component={Calculate} />\n                    <Route\n                      path=\"/:page\"\n                      render={({ match }) => {\n                        let path = `./${match.params.page}.md`;\n                        if (dox.keys().indexOf(path) !== -1)\n                          return <Docs markdown={dox(path).default} />;\n                        else return <h1>404</h1>;\n                      }}\n                    />\n                  </Switch>\n                </Suspense>\n              </Container>\n            </main>\n          </div>\n          <Analytics />\n        </BrowserRouter>\n      </ThemeProvider>\n    </>\n  );\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://cra.link/PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://cra.link/PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}","import React, {useEffect} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nimport * as state from \"./state\";\nimport { useSetRecoilState, RecoilRoot } from \"recoil\";\n\nfunction Root() {\n  const setShowReload = useSetRecoilState(state.showReload);\n  const setWaitingWorker = useSetRecoilState(state.waitingWorker);\n\n  useEffect(() => {\n    serviceWorkerRegistration.register({\n      onUpdate: (registration) => {\n        setShowReload(true);\n        setWaitingWorker(registration.waiting);\n      }\n    });\n  }, [setShowReload, setWaitingWorker]);\n\n  return (\n      <App />\n  );\n\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <RecoilRoot><Root /></RecoilRoot>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","\nlet parser;\n\ntry {\n  parser = require('../pegjs-loader.js!./parser.js');\n} catch (e) {\n  parser = require(\"pegjs\").generate(require(\"./parser.js\"));\n}\n\nlet {\n  Die,\n  SetValue,\n  Cloud,\n  NumberValue,\n  BinaryOperation,\n  Call,\n  Block,\n  StringValue,\n  ksort,\n} = require(\"./values\");\n\nlet { Output } = require(\"./statements\");\n\nfunction crunch(e) {\n  if (typeof e == \"number\") return e;\n  switch (e.type) {\n    case \"die\":\n      return e;\n    case \"set\":\n      return e;\n    case \"math\":\n      return e;\n    case \"string\":\n      return e;\n    case \"cross\":\n      return {\n        type: \"set\",\n        elements: new Array(roll(e.left)).fill(0).map((n) => e.right),\n      };\n    default:\n      throw new Error(`Unknown type: ${e.type}`);\n  }\n}\n\nfunction valueize(e) {\n  if (typeof e == \"number\") return new NumberValue(e);\n  switch (e.type) {\n    case \"block\":\n      return new Block(e.body.map(valueize));\n    case \"output\":\n      return new Output(valueize(e.expression), e.name || e.text);\n    case \"die\":\n      return new Die(\n        valueize(e.sides),\n        e.times ? valueize(e.times) : undefined\n      );\n    case \"set\":\n      return new SetValue(\n        e.elements.map((v) => valueize(v)),\n        true\n      );\n    case \"string\":\n      return new StringValue(e.value);\n    case \"math\":\n      return new BinaryOperation(\n        valueize(e.left),\n        [e.op, e.m],\n        valueize(e.right)\n      );\n    case \"ntimes\":\n      let left = valueize(e.left);\n      let right = valueize(e.right);\n\n      if (left.type == \"number\")\n        return new SetValue(new Array(left.value).fill(0).map((n) => right));\n\n      return new BinaryOperation(left, \"ntimes\", right);\n    case \"call\":\n      return new Call(\n        e.name,\n        e.args.map((o) => valueize(o))\n      );\n    default:\n      console.log(\"??\", e, typeof e);\n      throw new Error(`Unknown type: ${e.type}`);\n  }\n}\n\nfunction debug(e) {\n  if (typeof e == \"number\") return e;\n  if (typeof e == \"undefined\") return \"?\";\n\n  switch (e.type) {\n    case \"output\":\n      return `output ${debug(e.expression)}\\n`;\n    case \"block\":\n      return e.body.map(debug);\n    case \"die\":\n      return `${e.times == undefined ? \"\" : \"(\" + debug(e.times) + \")\"}d${debug(\n        e.sides\n      )}`;\n    case \"set\":\n      return \"{\" + e.elements.map((v) => debug(v)).join(\",\") + \"}\";\n    case \"math\":\n      return `(${debug(e.left)} ${e.op} ${debug(e.right)})`;\n    case \"ntimes\":\n      return `(${debug(e.left)} x ${debug(e.right)})`;\n    case \"call\":\n      return `${e.name}(${e.args.map((a) => debug(a)).join(\", \")})`;\n    case \"string\":\n      return JSON.stringify(e.value);\n    default:\n      throw new Error(`Unknown type: ${e.type}`);\n  }\n}\n\nfunction keyComp(ao, bo) {\n  //let ao = JSON.parse(a);\n  //let bo = JSON.parse(b);\n\n  if (typeof ao == \"number\" && typeof bo == \"number\") return ksort(bo, ao);\n\n  for (let i = 0; i < bo.length; ++i) {\n    if (bo[i] === undefined) return 1;\n    if (ao[i] != bo[i]) return ksort(bo[i], ao[i]);\n  }\n\n  if (bo.length > ao.length) return -1;\n\n  return 0;\n}\n\nmodule.exports = {\n  parser,\n  debug,\n  valueize,\n  keyComp,\n};\n"],"sourceRoot":""}