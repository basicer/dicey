{"version":3,"sources":["worker.js","../dicey-math/values.js","../dicey-math/parser.js","../dicey-math/functions.js","../dicey-math/statements.js","../ //.md$","docs/articles.md","docs/docs.md","docs/donate.md","docs/functions.md","docs/support.md","styles.js","components/Navigation.jsx","state.js","components/Chart.jsx","components/CalcInput.jsx","components/CalcTable.jsx","components/OptionBar.jsx","components/Calculate.jsx","components/Doc.jsx","App.js","reportWebVitals.js","serviceWorkerRegistration.js","index.js","../dicey-math/index.js"],"names":["addMethods","methods","module","exports","w","Worker","name","ksort","b","a","isNaN","parseFloat","ntimes","left","right","set","type","value","lc","denseCloud","z","values","length","SetValue","Array","k","fill","transform","CloudBuilder","this","entries","total","dense","sum","key","sources","undefined","JSON","stringify","reduction","c","Cloud","Die","sides","times","NumberValue","debug","tx","C","i","Math","max","add","done","collapse","elements","v","cloud","cross","lv","rv","ne","concat","sort","Block","body","Call","args","arguments","fn","require","Error","apply","number","map","join","clouds","cn","push","Object","reduce","e","nv","dx","val","StringValue","BinaryOperation","l","r","o","m","op","opMode","slice","rc","count","filter","n","applyOp","cb","reroll","okay","kk","floor","arity","normal","len","stddev","nvarianceX2","mean","exp","min","vs2","vs1","explode","vs","best","shift","extra","penalty","pow","ls","bag","repeat","t","target","x","indexOf","Output","expression","webpackContext","req","id","webpackContextResolve","__webpack_require__","code","keys","resolve","style","theme","root","display","active","color","toolbar","paddingRight","toolbarIcon","alignItems","justifyContent","padding","mixins","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","menuButtonHidden","title","flexGrow","drawerPaper","position","whiteSpace","drawerPaperClose","overflowX","spacing","breakpoints","up","appBarSpacer","content","height","overflow","container","paddingTop","paddingBottom","paper","flexDirection","muted","palette","text","secondary","textDecoration","fixedHeight","rightButton","float","backdrop","filler","byline","bottom","textAlign","useStyles","makeStyles","styles","Navigation","open","handleDrawerClose","classes","links","exact","Drawer","variant","clsx","className","IconButton","onClick","Divider","List","url","icon","ListItem","button","activeClassName","component","RouterLink","to","ListItemIcon","ListItemText","primary","Box","href","workerInstance","worker","reload","atom","default","random","query","parsed","selector","get","ok","parser","parse","console","log","error","mode","transpose","working","sample","fresh","sampleError","activeSample","p","terminate","compute","result","errors","s","location","start","line","column","message","se","ChartJS","register","LineElement","PointElement","LinearScale","Title","CategoryScale","CHART_COLORS","blue","red","orange","yellow","green","purple","grey","black","Chart","useRecoilValue","state","useState","options","setOptions","useTheme","datasets","data","setData","first","setFirst","useEffect","labels","f","label","nameIsValue","parsing","find","y","uv","backgroundColor","borderColor","delayBetweenPoints","animation","from","NaN","delay","ctx","xStarted","index","chart","scales","getPixelForValue","meta","getDatasetMeta","datasetIndex","getProps","yStarted","maintainAspectRatio","ticks","beginAtZero","callback","getLabelForValue","plugins","legend","interaction","intersect","textbox","fontFamily","card","CalcInput","useRecoilState","setExpression","Card","CardContent","TextField","multiline","maxRows","fullWidth","onChange","CardActions","Alert","severity","chony","tableContainer","maxHeight","pre","veryDense","bar","borderRadius","CalcTable","table","idx","TableContainer","Paper","Table","stickyHeader","size","TableHead","TableRow","TableCell","align","TableBody","row","rowid","scope","toFixed","lineHeight","OptionBar","setCollapse","setTranspose","setMode","RadioGroup","FormControlLabel","Radio","FormControl","Select","MenuItem","control","Switch","checked","SilentErrorBoundary","props","hasError","errorInfo","children","React","Component","doc","minHeight","freshness","top","opacity","marginTop","paddingLeft","a11yProps","TabPanel","other","role","hidden","SampleCacher","setSample","setFresh","useSetRecoilState","setSampleError","useRecoilStateLoadable","contents","ExportWrapper","exportText","readOnly","rows","RollContainer","roll","setRoll","Typography","gutterBottom","Button","acc","rollOn","raw","Freshness","CalcResult","tabValue","handleTabChange","AppBar","Toolbar","Tabs","scrollButtons","Tab","ZAlert","Calculate","q","URLSearchParams","useLocation","search","didLoadQuery","setDidLoadQuery","setQuery","setTimeout","Suspense","fallback","h1","h2","h3","h4","h5","h6","background","example","textTransform","Example","uri","encodeURIComponent","Docs","markdown","overrides","Link","li","kbd","Backdrop","CircularProgress","dox","App","isDark","useMediaQuery","paletteType","setPaletType","useMemo","createMuiTheme","main","darken","pink","A400","history","useHistory","localStorage","redirect","replace","setOpen","shouldStartClosed","amOpen","ThemeProvider","CssBaseline","edge","noWrap","Container","maxWidth","path","render","match","params","page","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","isLocalhost","Boolean","window","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","StrictMode","document","getElementById","URL","process","origin","addEventListener","fetch","headers","response","contentType","status","ready","unregister","checkValidServiceWorker","serviceWorkerRegistration","generate","valueize","keyComp","ao","bo"],"mappings":"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","file":"static/js/main.d69cb0f9.chunk.js","sourcesContent":["\n\t\t\t\tvar addMethods = require(\"../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"compute\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"56c2ef480b05fe98be23.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","let ksort = (b, a) => {\n  a = isNaN(parseFloat(a)) ? a : parseFloat(a);\n  b = isNaN(parseFloat(b)) ? b : parseFloat(b);\n\n  if (b > a) return -1;\n  if (a > b) return 1;\n  return 0;\n};\n\nconst ntimes = (left, right, set = false) => {\n  if (left.type == \"number\" && left.value == 1) return right;\n  let lc = left.denseCloud();\n  let z = lc.values;\n\n  if (z.length == 1) {\n    return new SetValue(new Array(z[0].k[0]).fill(right), set);\n  }\n\n  return lc.transform((k) => {\n    let s = new SetValue(new Array(k[0]).fill(right), set);\n    return s;\n  });\n};\n\nclass CloudBuilder {\n  constructor() {\n    this.entries = {};\n    this.total = 0;\n    this.dense = true;\n    this.sum = 0;\n  }\n  add(k, w, sources = undefined) {\n    let key;\n    if (k.length != 1) {\n      this.dense = false;\n      key = k;\n    } else {\n      key = JSON.stringify(k);\n    }\n\n    if (!this.entries[key]) this.entries[key] = { k: k, w: w, sources };\n    else this.entries[key].w += w;\n\n    if (this.dense) this.sum += k[0] * w;\n\n    this.total += w;\n  }\n\n  done() {\n    if (this.total > 1e30) {\n      let reduction = 1e10;\n      for (let k in this.entries) this.entries[k].w /= reduction;\n      this.total /= reduction;\n      if (this.dense) this.sum /= reduction;\n    }\n    let c = new Cloud(this.entries, this.total, this.dense);\n    if (this.dense) c.sum = this.sum;\n    return c;\n  }\n}\n\nclass Die {\n  get type() {\n    return \"die\";\n  }\n  debug() {\n    return `d${this.sides.debug()}`;\n  }\n\n  constructor(sides = 6, times = undefined) {\n    this.sides = sides;\n    this.times = times == undefined ? new NumberValue(1) : times;\n  }\n\n  denseCloud() {\n    return this.tx().denseCloud();\n  }\n\n  tx() {\n    if (this.sides.type == \"number\") {\n      let total = this.sides.value;\n      if (total == 0) return new Cloud({ \"[0]\": { k: [0], w: 1 } }, 1, true);\n\n      let C = new CloudBuilder();\n      for (let i = 1; i <= Math.max(0, 0 | this.sides); ++i) {\n        C.add([i], 1, [this]);\n      }\n      return ntimes(this.times, C.done());\n    }\n    if (this.sides.type == \"set\" && this.sides.collapse) {\n      let C = new CloudBuilder();\n      for (let i = 0; i < this.sides.elements.length; ++i) {\n        C.add([this.sides.elements[i].value], 1, [this]);\n      }\n      return ntimes(this.times, C.done());\n    } else {\n      return this.sides.denseCloud().transform((v) => {\n        if (v[0] == 0) return new Cloud({ \"[0]\": { k: [0], w: 1 } }, 1, true);\n        return new Die(new NumberValue(v[0]), this.times).denseCloud();\n      });\n    }\n  }\n\n  cloud() {\n    if (this.times.type == \"number\" && this.times.value == 1)\n      return this.tx().denseCloud();\n    else return this.tx().cloud();\n  }\n}\n\nfunction cross(a, b) {\n  let C = new CloudBuilder();\n\n  for (let lv of a.values) {\n    for (let rv of b.values) {\n      let ne = [].concat(lv.k, rv.k);\n      ne.sort(ksort);\n      let sources = undefined;\n      if (lv.sources && rv.sources) sources = [].concat(lv.sources, rv.sources);\n      C.add(ne, rv.w * lv.w, sources);\n    }\n  }\n\n  return C.done();\n}\n\nclass Block {\n  get type() {\n    return \"block\";\n  }\n  constructor(body) {\n    this.body = body;\n  }\n\n  output() {\n    return this.body;\n  }\n}\n\nclass Call {\n  constructor(name, args) {\n    this.name = name;\n    this.arguments = args;\n  }\n\n  fn() {\n    let fn = require(\"./functions\")[this.name];\n    if (!fn) throw new Error(`Undefined function '${this.name}'`);\n    return fn.apply(this, this.arguments);\n  }\n\n  denseCloud() {\n    return this.fn().denseCloud();\n  }\n\n  number() {\n    return this.fn().number();\n  }\n\n  cloud() {\n    switch (this.name) {\n      case \"sum\":\n      case \"max\":\n      case \"min\":\n        return this.denseCloud();\n      default:\n        return this.fn().cloud();\n    }\n  }\n}\n\nclass SetValue {\n  get type() {\n    return \"set\";\n  }\n  debug() {\n    return \"{\" + this.elements.map((v) => v.debug()).join(\",\") + \"}\";\n  }\n\n  constructor(elements, collapse = false) {\n    this.elements = elements;\n    this.collapse = collapse;\n  }\n\n  cloud() {\n    let clouds = this.collapse\n      ? this.elements.map((c) => c.denseCloud())\n      : this.elements.map((c) => c.cloud());\n\n    while (clouds.length > 1) {\n      let cn = [];\n      for (let i = 0; i < clouds.length; i += 2) {\n        if (clouds.length == i + 1) {\n          cn.push(clouds[i]);\n          break;\n        }\n\n        cn.push(cross(clouds[i], clouds[i + 1]));\n      }\n      clouds = cn;\n    }\n    return clouds[0];\n  }\n\n  denseCloud() {\n    let clouds = this.elements.map((c) => c.denseCloud());\n    while (clouds.length > 1) {\n      let cn = [];\n      for (let i = 0; i < clouds.length; i += 2) {\n        if (clouds.length == i + 1) {\n          cn.push(clouds[i]);\n          break;\n        }\n\n        if (\n          (i > 1) & (clouds[i] === clouds[i - 2]) &&\n          clouds[i + 1] === clouds[i - 1]\n        ) {\n          cn.push(cn[cn.length - 1]);\n          continue;\n        }\n\n        let C = new CloudBuilder();\n\n        for (let lv of clouds[i].values) {\n          for (let rv of clouds[i + 1].values) {\n            let ne = lv.k[0] + rv.k[0];\n            C.add([ne], rv.w * lv.w);\n          }\n        }\n\n        cn.push(C.done());\n      }\n      clouds = cn;\n    }\n    return clouds[0];\n  }\n}\n\nclass Cloud {\n  get type() {\n    return \"cloud\";\n  }\n  constructor(map, total, dense = false) {\n    this.values = Object.values(map);\n    this.total = total;\n    this.dense = dense;\n    for (let v of Object.values(map))\n      if (v.k === undefined) throw new Error(\"Invalid map\");\n  }\n\n  cloud() {\n    return this;\n  }\n  denseCloud() {\n    if (this.dense) return this;\n    return this.collapse();\n  }\n\n  number() {\n    if (this.values.length != 1) throw new Error(\"Wanted a single value.\");\n    if (this.values[0].k.length != 1) throw new Error(\"Wanted a single value.\");\n    return new NumberValue(this.values[0].k[0]);\n  }\n\n  collapse(fn) {\n    if (fn == undefined && this.dense) return this;\n    if (fn == undefined)\n      fn = (k) => [\n        k.reduce((v, e) => {\n          if (typeof v == \"number\" && typeof e == \"number\") return v + e;\n          else return \"\" + v + \" \" + e;\n        }),\n      ];\n\n    let C = new CloudBuilder();\n    for (let v of this.values) {\n      if (v.k.length > 0) {\n        let ne = fn(v.k);\n        C.add(ne, v.w);\n      } else {\n        C.add([0], v.w);\n      }\n    }\n    return C.done();\n  }\n\n  // Takes a function that given a vaue returns a cloud;\n  transform(fn) {\n    let C = new CloudBuilder();\n\n    for (let v of this.values) {\n      let rv = fn(v.k, v).cloud();\n      for (let nv of rv.values) {\n        let dx = (nv.w / rv.total) * v.w;\n        C.add(nv.k, dx);\n      }\n    }\n    return C.done();\n  }\n}\n\nclass NumberValue {\n  get type() {\n    return \"number\";\n  }\n  debug() {\n    return `${this.value}`;\n  }\n\n  constructor(val) {\n    this.value = parseFloat(val);\n  }\n\n  valueOf() {\n    return this.value;\n  }\n\n  cloud() {\n    let elements = {};\n    elements[JSON.stringify([this.value])] = { k: [this.value], w: 1 };\n    return new Cloud(elements, 1, this);\n  }\n  denseCloud() {\n    return this.cloud();\n  }\n  number() {\n    return this;\n  }\n}\n\nclass StringValue {\n  constructor(value) {\n    this.value = value;\n  }\n  cloud() {\n    let elements = {};\n    elements[JSON.stringify([this.value])] = { k: [this.value], w: 1 };\n    return new Cloud(elements, 1, this);\n  }\n  denseCloud() {\n    return this.cloud();\n  }\n  number() {\n    throw new Error(\"needed a number but got a string\");\n  }\n}\n\nclass BinaryOperation {\n  constructor(l, [o, m], r) {\n    this.left = l;\n    this.op = o;\n    this.opMode = m;\n    this.right = r;\n  }\n\n  static applyOp(left, op, right) {\n    switch (op) {\n      case \"+\":\n        if (typeof left == \"number\" && typeof right == \"number\")\n          return left + right;\n        else return \"\" + left + \" \" + right;\n      case \"-\":\n        return left - right;\n      case \"/\":\n        return Math.floor(left / right);\n      case \"*\":\n        return left * right;\n\n      case \">\":\n        return left > right ? 1 : 0;\n      case \"<\":\n        return left < right ? 1 : 0;\n      case \">=\":\n        return left >= right ? 1 : 0;\n      case \"<=\":\n        return left >= right ? 1 : 0;\n\n      case \"==\":\n      case \"=\":\n        return left == right ? 1 : 0;\n      case \"!=\":\n        return left != right ? 1 : 0;\n    }\n  }\n\n  denseCloud() {\n    return this.cloud().collapse();\n  }\n\n  number() {\n    return this.cloud().number();\n  }\n\n  cloud() {\n    if (this.op == \"dl\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) =>\n        lc.collapse((k) => k.slice(0, Math.max(k.length - v[0], 0)))\n      );\n    }\n    if (this.op == \"dh\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) => lc.collapse((k) => k.slice(v[0])));\n    }\n\n    if (this.op == \"kh\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) => lc.collapse((k) => k.slice(0, v[0])));\n    }\n    if (this.op == \"kl\") {\n      let lc = this.left.cloud();\n      let rc = this.right.denseCloud();\n      return rc.transform((v) =>\n        lc.collapse((k) => k.slice(Math.max(k.length - v[0], 0)))\n      );\n    }\n    if (this.op == \"@\") {\n      let lc = this.left.denseCloud();\n      let rc = this.right.cloud();\n      return lc.transform((v) =>\n        rc.collapse((k) => (v[0] > 0 && k.length >= v[0] ? [k[v[0] - 1]] : [0]))\n      );\n    }\n\n    if (this.op == \"ntimes\") {\n      return ntimes(this.left, this.right).cloud();\n    }\n\n    if (this.opMode === \"cs\") {\n      let val = this.right.number();\n\n      return this.left.cloud().transform((k) => {\n        let count = k.filter((n) =>\n          BinaryOperation.applyOp(n, this.op, val)\n        ).length;\n        return new NumberValue(count).denseCloud();\n      });\n    }\n\n    if (this.opMode === \"ro\") {\n      let val = this.right.number();\n\n      let cb = new CloudBuilder();\n      for (let e of this.left.cloud().values) {\n        let reroll = [];\n        let okay = [];\n        for (let i = 0; i < e.k.length; ++i) {\n          if (BinaryOperation.applyOp(e.k[i], this.op, val)) {\n            if (!e.sources)\n              throw new Error(\n                \"Tried to reroll a value that couldnt be traced back to a die\"\n              );\n            reroll.push(new Die(e.sources[i].sides));\n          } else {\n            okay.push(e.k[i]);\n          }\n        }\n\n        if (reroll.length === 0) {\n          cb.add(e.k, e.w, e.sources);\n        } else {\n          let s = new SetValue(reroll);\n          let c = s.cloud();\n          for (let o of c.values) {\n            let ne = [].concat(okay, o.k);\n            ne.sort(ksort);\n            cb.add(ne, (e.w * o.w) / c.total);\n          }\n        }\n      }\n\n      return cb.done();\n    }\n\n    if (this.opMode === \"zu\") {\n      let val = this.right.number();\n\n      let cb = new CloudBuilder();\n      for (let e of this.left.cloud().values) {\n        let kk = [];\n        for (let i = 0; i < e.k.length; ++i) {\n          if (BinaryOperation.applyOp(e.k[i], this.op, val)) {\n            kk.push(e.k[i]);\n          } else {\n            kk.push(0);\n          }\n        }\n\n        cb.add(kk, e.w);\n      }\n\n      return cb.done();\n    }\n\n    let left = this.left.denseCloud();\n    let right = this.right.denseCloud();\n\n    let C = new CloudBuilder();\n\n    for (let lv of left.values) {\n      for (let rv of right.values) {\n        let nv = lv.w * rv.w;\n        let ne = BinaryOperation.applyOp(lv.k[0], this.op, rv.k[0]);\n        C.add([ne], nv);\n      }\n    }\n\n    return C.done();\n  }\n}\n\nmodule.exports = {\n  Die,\n  SetValue,\n  Cloud,\n  NumberValue,\n  BinaryOperation,\n  Call,\n  Block,\n  CloudBuilder,\n  StringValue,\n  ksort,\n  ntimes,\n};\n","module.exports = `\n\n{\n  function math(l,o) {\n     let v = l;\n     for (let i = 0; i < o.length; i++) {\n       v = {type: 'math', right: o[i][3] || 1, left: v};\n       if (typeof(o[i][1]) == \"string\") v.op = o[i][1];\n       else Object.assign(v, o[i][1]);\n     }\n     return v;\n  }\n}\n\nstart =\n  b:Block WS { return b; } /\n  e:Expression WS? { return {\n    type: 'block',\n    body: [{type: 'output', expression: e, name: text()}]\n  }; }\n\nBlock = e:(WS Statement)+ { return {\n  type: 'block',\n  body: e.map(v => v[1]) }; }\n\nStatement = OutputStatement\n\nOutputStatement = 'output' WS e:OutputExpression { return {type: 'output', expression: e[0], text: e[1], name: e[2]}; }\nOutputExpression = e:Expression n:Named? { return [e, text(), n] }\n\nNamed = WS 'named' WS '\"' s:$([^\"]+) '\"' { return s }\n\nWS = [ \\\\n\\\\t\\\\r]*\nExpression = P1Bin / Value\n\nCall = \n  n:$([a-z]+) WS '(' WS ')' { return {type: 'call', name:n, args:[]}; } /\n  n:$([a-z]+) WS '(' WS e:Expression WS o:(',' WS Expression WS)* ')' {\n    let a = [e];\n    for ( let b of o ) a.push(b[2]);\n    return {type: 'call', name:n, args:a}; \n  }\n\n\nCompare = m:$('cs' / 'ms' / 'ro' / 'zu')? o:$([<>]'='?/'=='/'!='/'=') { return m ? {m: m, op: o} : {op: o}; }\n\nP1Bin = l:P2Bin o:(WS e:Compare WS r:P2Bin)* { return math(l,o) } / P2Bin\nP2Bin = l:P3Bin o:(WS e:[+-] WS r:P3Bin)* { return math(l,o); } / P3Bin\nP3Bin = l:P4Bin o:(WS e:[*/] WS r:P4Bin)* { return math(l,o) } / P4Bin\nP4Bin = \n  l:Primary o:(WS e:(DropLow/DropHigh/KeepLow/KeepHigh/'@') WS r:Primary?)* { return math(l,o) } /\n  Primary\n\nDropLow = ('droplow' / 'dl') { return 'dl'; } \nKeepLow = ('keeplow' / 'kl') { return 'kl'; } \nDropHigh = ('drophigh' / 'dh') { return 'dh'; } \nKeepHigh = ('keephigh' / 'kh') { return 'kh'; } \n\nPrimary = Value / '(' WS e:Expression WS ')' { return e }\nNumbery = Number / '(' WS e:Expression WS ')' { return e }\n\nValue = Set / Cloud / Call / Number / String\n\nSet = '{' WS f:Expression WS e:(WS ',' WS Expression WS)* '}' {\n  let elements = [f];\n  for (let i = 0; i < e.length; i++) {\n    elements.push(e[i][3]);\n  }\n  return {type: 'set', elements: elements };\n}\n\n\nCloud = \n\td:Die {\n    //return { type: 'set', elements: [d] };\n    return d;\n  } /\n  n:Numbery WS d:Die { \n    if (n === 1) return d;\n    return { type: 'die', times: n, sides: d.sides }\n  } /\n  n:Numbery WS 'd' WS d:Set {\n    return { type: 'die', times: n, sides: d };\n  } /\n  'd' WS d:Set {\n    return { type: 'die', sides: d };\n  }\n\nDie =\n  'd' n:Numbery { return {type: 'die', sides: n}; } /\n  'd%' { return {type: 'die', sides: 100}; } /\n  'dF' { return {type: 'die', sides: { type: 'set', elements: [-1, 0, 1] } }; }\n \n\nNumber = d:$([-]?[0-9]+) { return parseInt(d); }\n\nEscapeSequence = [\\\\\\\\] e:[\"'] { return e }\nString = \n  '\"' v:(EscapeSequence / $[^\"] / $' ')* '\"' { return { type: 'string', value:  v.join('')}} /\n  \"'\" v:(EscapeSequence / $[^'] / $' ')* \"'\" { return { type: 'string', value:  v.join('')}}\n\n\n`;\n","const {\n  SetValue,\n  NumberValue,\n  CloudBuilder,\n  ksort,\n  ntimes,\n  StringValue,\n} = require(\"./values\");\n\nlet arity = (fn, n) => {\n  if (fn.arguments.length != n)\n    throw new Error(\n      `Function '${fn.name}' expets ${n} argument${n > 1 ? \"s\" : \"\"}`\n    );\n};\n\n/**\n * Add the elements of each set together into a single field.\n * @param  {...Value} args\n * @returns\n * @example <kbd>sum(1, 2, 3)</kbd> = <kbd>6</kbd>\n * @example <kbd>sum(1, d6, 3d6)</kbd> = <kbd>4d6+1</kbd>\n */\nfunction sum(...args) {\n  return new SetValue([new SetValue(args)], true);\n}\n\n/**\n * Add the elements of each set to one big set.\n * @param  {...Value} args\n * @returns\n * @example <kbd>bag(3d6, 2d6, {d6, d6, d6})</kbd> = <kbd>8d6</kbd>\n */\nfunction bag(...args) {\n  return new SetValue(args);\n}\n\n/**\n * Create a set containing the arguments.\n * @param  {...Value} args\n * @returns\n * @example <kbd>set(3d6, 2d6)</kbd> = <kbd>{3d6, 2d6}</kbd>\n */\nfunction set(...args) {\n  return new SetValue(args, true);\n}\n/**\n * Find the maximum possible outcome in a field.\n * @param {*} v\n * @returns\n * @example <kbd>max(d6)</kbd> = 6\n * @example <kbd>max(3d6)</kbd> = 18\n */\nfunction max(v) {\n  arity(this, 1);\n  let vs1 = v.denseCloud().values;\n  vs1.sort((a, b) => ksort(a.k, b.k));\n  return new NumberValue(vs1[0].k[0]);\n}\n\n/**\n * Find the minimum possible outcome in a field.\n * @param {*} v\n * @returns\n * @example <kbd>min(d6)</kbd> = 1\n * @example <kbd>min(3d6)</kbd> = 2\n */\nfunction min(v) {\n  arity(this, 1);\n  let vs2 = v.denseCloud().values;\n  vs2.sort((b, a) => ksort(a.k, b.k));\n  return new NumberValue(vs2[0].k[0]);\n}\n\n/**\n * Find the mean outcome in a field.\n * @param {*} v\n * @returns\n * @example <kbd>mean(d6)</kbd> = 3.5\n * @example <kbd>mean(3d6)</kbd> = 9.6\n */\nfunction mean(v) {\n  arity(this, 1);\n  let vs2 = v.denseCloud();\n  return new NumberValue(vs2.sum / vs2.total);\n}\n\n/**\n * A set containing the elment `cloud` repeated `times` times.\n * @param {*} what\n * @param {*} times\n * @returns\n * @example\n * <kbd>repeat(d6, 3)</kbd> = <kbd>3d6</kbd>\n */\nfunction repeat(a, b) {\n  arity(this, 2);\n  return ntimes(b, a, true);\n}\n\nfunction explode(...args) {\n  let vs = args[0].denseCloud().values;\n  vs.sort((a, b) => ksort(a.k, b.k));\n  let best = vs.shift();\n  let C = new CloudBuilder();\n  let n = args.length > 1 ? args[1].value : 2;\n\n  for (let i = 0; i <= n; ++i) {\n    let extra = new Array(i).fill(best.k[0]);\n    let penalty = 1 / Math.pow(vs.length + 1, i);\n    let ls = i == n ? [].concat(vs, best) : vs;\n    for (let o of ls) {\n      let ne = [].concat(extra, o.k);\n      C.add(ne, o.w * penalty);\n    }\n  }\n  return C.done();\n}\n\n/**\n * A probability cloud follow the normal distribution from 0 to `range`\n * with mean `range/2` and standard deviation `stddev`\n * @param  {Value} range\n * @param  {Value} stddev\n * @returns\n * @example\n * <kbd>output min(3d6)+normal(max(3d6)-min(3d6),3)\n * output 3d6</kbd>\n */\nfunction normal(...args) {\n  arity(this, 2);\n  let len = args[0].number().value;\n  let stddev = args[1].number().value;\n  let nvarianceX2 = -2 * (stddev * stddev);\n  let mean = len / 2;\n\n  let C = new CloudBuilder();\n  for (let i = 0; i <= len; ++i) {\n    C.add([i], Math.exp(((i - mean) * (i - mean)) / nvarianceX2));\n  }\n\n  return C.done();\n}\n\n/**\n * Returns the field represneting the chance of getting a number of target values.\n * @param {Cloud} search\n * @param {number} target\n * @returns\n * @example <kbd>count(3d6,6)</kbd>\n */\nfunction count(cloud, t) {\n  let target = t.number().value;\n\n  return cloud.cloud().transform((v) => {\n    return new NumberValue(v.filter((x) => x == target).length).denseCloud();\n  });\n}\n\n/**\n * Returns the field represneting the chance of containing a number.\n * @param {Cloud} search\n * @param {number} target\n * @returns\n * @example <kbd>count(3d6,6)</kbd>\n */\nfunction contains(cloud, t) {\n  let target = t.number().value;\n\n  return cloud.cloud().transform((v) => {\n    return new NumberValue(v.indexOf(target) === -1 ? 0 : 1).denseCloud();\n  });\n}\n\n/**\n *\n * @param {Cloud} cloud\n * @param  {...any} args\n * @returns\n * @example <kbd>bucket(2d20kh, 'fumble', 2, 'failure', 10, 'success', 20, 'critical')</kbd>\n */\nfunction bucket(cloud, ...args) {\n  if (args.length < 3)\n    throw new Error(`bucket function expects at least 4 args`);\n  if (args.length % 2 != 1)\n    throw new Error(`bucket function expects an even number of arguments`);\n\n  return cloud.denseCloud().transform((v) => {\n    for (let i = 0; i < args.length - 1; i += 2) {\n      let target = args[i + 1].number().value;\n      if (v < target) return args[i];\n    }\n    return args[args.length - 1];\n  });\n}\n\nfunction diez(cloud) {\n  let e = cloud.cloud().values[0].sources;\n  return new StringValue(e ? e.map((x) => x.debug()).join(\",\") : \"?\");\n}\n\nmodule.exports = {\n  sum,\n  normal,\n  min,\n  max,\n  explode,\n  set,\n  bag,\n  repeat,\n  normal,\n  mean,\n  count,\n  contains,\n  bucket,\n  diez,\n};\n","class Output {\n  constructor(e, name = \"output\") {\n    this.expression = e;\n    this.name = name;\n  }\n  get type() {\n    return \"output\";\n  }\n  denseCloud() {\n    return this.expression.denseCloud();\n  }\n  cloud() {\n    return this.expression.cloud();\n  }\n}\n\nmodule.exports = {\n  Output,\n};\n","var map = {\n\t\"./articles.md\": 204,\n\t\"./docs.md\": 205,\n\t\"./donate.md\": 206,\n\t\"./functions.md\": 207,\n\t\"./support.md\": 208\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 203;","export default \"# Learn you some stuff\\n\";","export default \"## Documentation\\n\\nDicey is based on the wonderful [AnyDice](https://anydice.com/) made by [Jasper Flick](https://catlikecoding.com/jasper-flick/). The syntax has been changed somewhat, with dice notation being aligned closer to [Foundry](https://foundryvtt.com/article/dice-advanced/) and [Roll20](https://wiki.roll20.net/Dice_Reference). Dicey runs completely in the browser, and can be used offline when saved to your phone's homescreen.\\n\\n### Basics\\n\\nDicey fundamentally operates as a calculator, but instead of operating only on numbers, it can also operate on probabilties.\\n\\nAs an overly simple example, let's add two and two together. You can click on the example to load it.\\n\\n<kbd>output 2+2</kbd>\\n\\n<br /><br />\\n\\nNotice the calculation starts with the word `output`. This instructs Dicey to display the result. You can leave this out, but it's good to know about if you want to output multiple things.\\n\\n<kbd>output 2+2\\noutput 2+2\\\\*2</kbd>\\n\\n### Dice\\n\\nAs a simple example, <kbd>3d6</kbd> represents rolling three six-sided dice.\\n\\nThe arguements to the die operator aren't limited to numbers. If a <kbd>d{4,5,10}</kbd> sets is passed to the right hand argument, the elements of that set will make up the sides of the die. Similally a probaility can be used as the second arguement to give chance to roll die with that number of sides. <kbd>2d(d6)</kbd> would be analgous to rolling a d6 to determin which type of dice to pick up, and then rolling two of those types of dice.\\n\\n### Sets\\n\\nSets are formed by placing comma seperated elements between `{}`'s. For example <kbd>{3,4,5}</kbd> is a set of three numbers. By default, the elements of a set are added together and displyed as one number. This can be disabled with the `collapse` toggle at the bottom of the calculator page. Sets are by convention stored in decending order.\\n\\n&gt; <kbd>{3d6, d10} kh 1</kbd> - Take the higest roll between `3d6` and `d10`.\\n\\n### Functions\\n\\nFunction calls are made similar to C-style languages. For example <kbd>max(d6)</kbd> represents calling the max function and passing `d6` as its only argument.\\n\\nSee the [function refrence](/functions) for a list of built-in functions.\\n\";","export default \"# Gimme Meoney\\n\\nHi Mom\\n\";","export default \"## Function Library\\n\\n### `bag(...)`\\n\\nAdd the elements of each set to one big set.\\n\\n&gt; <kbd>bag(3d6, 2d6, {d6, d6, d6})</kbd> = <kbd>8d6</kbd>\\n\\n\\n\\n### `bucket(cloud, ...)`\\n\\n\\n\\n&gt; <kbd>bucket(2d20kh, 'fumble', 2, 'failure', 10, 'success', 20, 'critical')</kbd>\\n\\n\\n\\n### `contains(search, target)`\\n\\nReturns the field represneting the chance of containing a number.\\n\\n&gt; <kbd>count(3d6,6)</kbd>\\n\\n\\n\\n### `count(search, target)`\\n\\nReturns the field represneting the chance of getting a number of target values.\\n\\n&gt; <kbd>count(3d6,6)</kbd>\\n\\n\\n\\n### `max(v)`\\n\\nFind the maximum possible outcome in a field.\\n\\n&gt; <kbd>max(d6)</kbd> = 6\\n\\n&gt; <kbd>max(3d6)</kbd> = 18\\n\\n\\n\\n### `mean(v)`\\n\\nFind the mean outcome in a field.\\n\\n&gt; <kbd>mean(d6)</kbd> = 3.5\\n\\n&gt; <kbd>mean(3d6)</kbd> = 9.6\\n\\n\\n\\n### `min(v)`\\n\\nFind the minimum possible outcome in a field.\\n\\n&gt; <kbd>min(d6)</kbd> = 1\\n\\n&gt; <kbd>min(3d6)</kbd> = 2\\n\\n\\n\\n### `normal(range, stddev)`\\n\\nA probability cloud follow the normal distribution from 0 to `range`\\nwith mean `range/2` and standard deviation `stddev`\\n\\n&gt; <kbd>output min(3d6)+normal(max(3d6)-min(3d6),3)\\noutput 3d6</kbd>\\n\\n\\n\\n### `repeat(what, times)`\\n\\nA set containing the elment `cloud` repeated `times` times.\\n\\n&gt; <kbd>repeat(d6, 3)</kbd> = <kbd>3d6</kbd>\\n\\n\\n\\n### `set(...)`\\n\\nCreate a set containing the arguments.\\n\\n&gt; <kbd>set(3d6, 2d6)</kbd> = <kbd>{3d6, 2d6}</kbd>\\n\\n\\n\\n### `sum(...)`\\n\\nAdd the elements of each set together into a single field.\\n\\n&gt; <kbd>sum(1, 2, 3)</kbd> = <kbd>6</kbd>\\n\\n&gt; <kbd>sum(1, d6, 3d6)</kbd> = <kbd>4d6+1</kbd>\\n\\n\\n\";","export default \"# HAlp!\\n\\nHi Mom\\n\";","const drawerWidth = 240;\n\nconst style = (theme) => ({\n  root: {\n    display: \"flex\",\n  },\n  active: {\n    color: \"red\",\n  },\n  toolbar: {\n    paddingRight: 24, // keep right padding when drawer closed\n  },\n  toolbarIcon: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    padding: \"0 8px\",\n    ...theme.mixins.toolbar,\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create([\"width\", \"margin\"], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: 36,\n  },\n  menuButtonHidden: {\n    display: \"none\",\n  },\n  title: {\n    flexGrow: 1,\n  },\n  drawerPaper: {\n    position: \"relative\",\n    whiteSpace: \"nowrap\",\n    width: drawerWidth,\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerPaperClose: {\n    overflowX: \"hidden\",\n    transition: theme.transitions.create(\"width\", {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    width: theme.spacing(7),\n    [theme.breakpoints.up(\"sm\")]: {\n      width: theme.spacing(9),\n    },\n  },\n  appBarSpacer: theme.mixins.toolbar,\n  content: {\n    flexGrow: 1,\n    height: \"100vh\",\n    overflow: \"auto\",\n  },\n  container: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2),\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    overflow: \"auto\",\n    flexDirection: \"column\",\n  },\n  muted: {\n    color: theme.palette.text.secondary,\n    textDecoration: \"none\",\n  },\n  fixedHeight: {\n    height: 240,\n  },\n  rightButton: {\n    float: \"right\",\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: \"#fff\",\n  },\n  filler: {\n    height: \"100%\",\n    position: \"relative\",\n  },\n  byline: {\n    position: \"absolute\",\n    bottom: 5,\n    textAlign: \"center\",\n    width: \"100%\",\n  },\n});\n\nexport default style;","import React from \"react\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport clsx from \"clsx\";\n\nimport styles from \"../styles\";\n\nimport Divider from \"@material-ui/core/Divider\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { NavLink as RouterLink } from \"react-router-dom\";\n\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  ListItemSecondaryAction,\n  //Switch,\n  AccountTreeIcon,\n  Box,\n} from \"../material\";\n\nimport ChevronLeftIcon from \"@material-ui/icons/ChevronLeft\";\n\n//import ListSubheader from \"@material-ui/core/ListSubheader\";\n\n//import MenuIcon from \"@material-ui/icons/Menu\";\n//import ListIcon from \"@material-ui/icons/List\";\n//import DashboardIcon from \"@material-ui/icons/Dashboard\";\n//import ShoppingCartIcon from \"@material-ui/icons/ShoppingCart\";\nimport PeopleIcon from \"@material-ui/icons/People\";\n//import BarChartIcon from \"@material-ui/icons/BarChart\";\n//import LayersIcon from \"@material-ui/icons/Layers\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport BallotIcon from \"@material-ui/icons/Ballot\";\n//import FindInPageIcon from \"@material-ui/icons/FindInPage\";\n//import ContactlessIcon from \"@material-ui/icons/Contactless\";\n//import ExploreIcon from \"@material-ui/icons/Explore\";\n\n//import AssignmentIcon from \"@material-ui/icons/Assignment\";\n\nconst useStyles = makeStyles(styles);\n\nexport default function Navigation({ open, handleDrawerClose }) {\n  const classes = useStyles();\n\n  let links = [\n    [\"Calculator\", \"/\", <DescriptionIcon />, { exact: true }],\n    //[\"Articles\", \"/articles\", <FindInPageIcon />],\n    [\"Documentation\", \"/docs\", <BallotIcon />],\n    [\"Function Library\", \"/functions\", <PeopleIcon />],\n    //[\"Support\", \"/support\", <ContactlessIcon />],\n    //[\"Donate\", \"/donate\", <LayersIcon />],\n  ];\n  return (\n    <Drawer\n      variant=\"permanent\"\n      classes={{\n        paper: clsx(classes.drawerPaper, !open && classes.drawerPaperClose),\n      }}\n      open={open}\n    >\n      <div className={classes.toolbarIcon}>\n        <IconButton onClick={handleDrawerClose}>\n          <ChevronLeftIcon />\n        </IconButton>\n      </div>\n      <Divider />\n      <List>\n        {links.map(([name, url, icon, extra = {}]) => (\n          <ListItem\n            {...extra}\n            button\n            activeClassName=\"Mui-selected\"\n            component={RouterLink}\n            key={name}\n            to={url}\n          >\n            <ListItemIcon>{icon}</ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n        <Divider />\n        {false && (\n          <ListItem>\n            <ListItemIcon>\n              <AccountTreeIcon />\n            </ListItemIcon>\n            <ListItemText primary=\"Simulator\" />\n            <ListItemSecondaryAction hidden={!open}></ListItemSecondaryAction>\n          </ListItem>\n        )}\n      </List>\n      {open && (\n        <Box className={classes.filler}>\n          <Box className={classes.byline}>\n            made by{\" \"}\n            <a className={classes.muted} href=\"http://github.com/basicer\">\n              Rob\n            </a>\n          </Box>\n        </Box>\n      )}\n    </Drawer>\n  );\n}\n","import {\n  atom,\n  selector,\n} from \"recoil\";\n\nimport { parser } from \"dicey-math\";\nimport worker from \"workerize-loader!./worker\"; // eslint-disable-line import/no-webpack-loader-syntax\n\nlet workerInstance = worker();\n\nexport let reload = atom({ key: \"reload\", default: Math.random() });\nexport let query = atom({ key: \"query\", default: \"output 3d6\" });\nexport let parsed = selector({\n  key: \"parsed\",\n  get: ({ get }) => {\n    let expression = get(query);\n    try {\n      let x = parser.parse(expression);\n      return { ok: true, v: x };\n    } catch (e) {\n      console.log(e);\n      return { ok: false, error: e };\n    }\n  },\n});\n\nexport let collapse = atom({ key: \"collapse\", default: true });\nexport let mode = atom({ key: \"mode\", default: \"normal\" });\nexport let transpose = atom({ key: \"transpose\", default: false });\n\nlet working = false;\n\nexport let sample = atom({ key: \"sample\", default: [] });\nexport let fresh = atom({ key: \"fresh\", default: false });\nexport let sampleError = atom({ key: \" sampleError\", default: null });\nexport let activeSample = selector({\n  key: \"selector\",\n  get: async ({ get }) => {\n    let p = get(parsed);\n    let c = get(collapse);\n    let m = get(mode);\n    let t = get(transpose);\n    if (!p.ok) return false;\n\n    if (working) {\n      workerInstance.terminate();\n      workerInstance = worker();\n    } else {\n      working = true;\n    }\n\n    let result = await workerInstance.compute({\n      parsed: p,\n      collapse: c,\n      mode: m,\n      transpose: t,\n    });\n    working = false;\n    return result;\n  },\n});\n\nexport let errors = selector({\n  key: \"error\",\n  get: ({ get }) => {\n    let p = get(parsed);\n\n    if (!p.ok) {\n      console.log(p);\n      let s = `${p.error.name}: `;\n      if (p.error.location)\n        s += ` ${p.error.location.start.line}:${p.error.location.start.column}`;\n      s += ` ${p.error.message}`;\n      return s;\n    }\n\n    let se = get(sampleError);\n    if (se) return se;\n    return false;\n  },\n});\n","import 'chart.js/auto';\nimport { Chart as ChartComponent } from \"react-chartjs-2\";\nimport { Chart as ChartJS, LineElement, PointElement, LinearScale, Title, CategoryScale } from 'chart.js';\n\n\nimport { useTheme } from \"@material-ui/core\";\nimport { useState, useEffect } from \"react\";\n\nimport {\n  useRecoilValue,\n} from \"recoil\";\n\nimport * as state from \"../state\";\n\nChartJS.register(LineElement, PointElement, LinearScale, Title, CategoryScale);\n\n\nexport const CHART_COLORS = {\n  blue: \"rgb(54, 162, 235)\",\n  red: \"rgb(255, 99, 132)\",\n  orange: \"rgb(255, 159, 64)\",\n  yellow: \"rgb(255, 205, 86)\",\n  green: \"rgb(75, 192, 192)\",\n  purple: \"rgb(153, 102, 255)\",\n  grey: \"rgb(201, 203, 207)\",\n  black: \"rgb(0, 0, 0)\",\n};\n\nexport default function Chart() {\n  const sample = useRecoilValue(state.sample);\n  const [options, setOptions] = useState([]);\n\n  let theme = useTheme();\n  let [data, setData] = useState({ datasets: [] });\n  let [first, setFirst] = useState(true);\n\n  let className = \"\";\n\n  useEffect(() => {\n    let labels = {};\n    for (let s of sample) for (let o of s.entries) labels[o.name] = true;\n    labels = Object.keys(labels);\n    labels.sort((a, b) => parseFloat(a) - parseFloat(b));\n    const data = {\n      labels: labels,\n      datasets: sample.map((s, i) => {\n        let c =\n          sample.length === 1\n            ? theme.palette.text.primary\n            : Object.values(CHART_COLORS)[i];\n\n        return {\n          id: `data${i}`,\n          //label: s.name,\n          label: s.nameIsValue ? s.name : `output ${i + 1}`,\n          parsing: false,\n          data: labels.map((x) => {\n            // eslint-disable-next-line eqeqeq\n            let v = s.entries.find((w) => w.name == x);\n            if (v) return { x: x, y: v.uv };\n            return { x: x, y: null };\n          }),\n          fill: false,\n          backgroundColor: c,\n          borderColor: c,\n        };\n      }),\n    };\n\n    const previousY = (ctx) => {\n      if (ctx.index === 0) return ctx.chart.scales.y.getPixelForValue(100);\n\n      let meta = ctx.chart.getDatasetMeta(ctx.datasetIndex);\n\n      if (!meta.data[ctx.index - 1])\n        return ctx.chart.scales.y.getPixelForValue(100);\n\n      return meta.data[ctx.index - 1].getProps([\"y\"], true).y;\n    };\n\n    const delayBetweenPoints = 500 / labels.length;\n    const animation = {\n      x: {\n        type: \"number\",\n        easing: \"linear\",\n        duration: delayBetweenPoints,\n        from: NaN, // the point is initially skipped\n        delay(ctx) {\n          if (ctx.type !== \"data\" || ctx.xStarted) {\n            return 0;\n          }\n          ctx.xStarted = true;\n          return ctx.index * delayBetweenPoints;\n        },\n      },\n      y: {\n        type: \"number\",\n        easing: \"linear\",\n        duration: delayBetweenPoints,\n        from: previousY,\n        delay(ctx) {\n          if (ctx.type !== \"data\" || ctx.yStarted) {\n            return 0;\n          }\n          ctx.yStarted = true;\n          return ctx.index * delayBetweenPoints;\n        },\n      },\n    };\n\n    setData(data);\n\n    const options = {\n      animation: first ? animation : undefined,\n      //responsive: true,\n      maintainAspectRatio: false,\n      scales: {\n        y: {\n          min: 0,\n          ticks: {\n            color: theme.palette.text.secondary,\n            beginAtZero: true,\n            callback: function (val) {\n              return this.getLabelForValue(val) + \"%\";\n            },\n          },\n          title: { text: \"Chance\", display: false },\n        },\n        x: {\n          ticks: { beginAtZero: true, color: theme.palette.text.secondary },\n        },\n      },\n      plugins: {\n        legend: {\n          position: \"bottom\",\n          labels: { color: theme.palette.text.secondary },\n        },\n      },\n      interaction: {\n        intersect: false,\n        mode: \"index\",\n      },\n    };\n\n    setOptions(options);\n    setFirst(false);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [sample, theme]);\n\n  console.log(\"CHART\", options, data);\n  return (\n    <ChartComponent\n      type=\"line\"\n      options={options}\n      data={data}\n      className={className}\n    />\n  );\n}\n","import React from \"react\";\nimport { Alert, TextField, Card, CardContent, CardActions } from \"../material\";\nimport { useRecoilState, useRecoilValue } from \"recoil\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport * as state from \"../state\";\n\nconst useStyles = makeStyles((theme) => ({\n  textbox: {\n    \"& textarea\": {\n      fontFamily: \"monospace\",\n    },\n  },\n  card: {\n    paddingBottom: 0,\n  },\n}));\n\nexport default function CalcInput() {\n  const classes = useStyles();\n  const [expression, setExpression] = useRecoilState(state.query);\n  const error = useRecoilValue(state.errors);\n\n  return (\n    <Card>\n      <CardContent className={classes.card}>\n        <TextField\n          className={classes.textbox}\n          id=\"outlined-multiline-static\"\n          label=\"Input\"\n          multiline\n          maxRows={6}\n          fullWidth\n          value={expression}\n          error={!!error}\n          onChange={(e) => setExpression(e.target.value)}\n          variant=\"outlined\"\n        />\n      </CardContent>\n      <CardActions>\n        {error ? <Alert severity=\"error\">{error}</Alert> : null}\n      </CardActions>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport {\n  Paper,\n  TableContainer,\n  TableCell,\n  TableBody,\n  TableHead,\n  TableRow,\n  Table,\n} from \"../material\";\n\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport {\n  useRecoilValue,\n} from \"recoil\";\n\nimport * as state from \"../state\";\n\nconst useStyles = makeStyles((theme) => ({\n  chony: { width: \"100%\" },\n  tableContainer: { maxHeight: 650 },\n  pre: { whiteSpace: \"nowrap\" },\n  veryDense: {\n    \"& td\": { paddingTop: 2, paddingBottom: 2 },\n    \"& th\": { paddingTop: 2, paddingBottom: 2 },\n  },\n  bar: {\n    transition: \"width 0.5s\",\n    borderRadius: 4,\n  },\n}));\n\nexport default function CalcTable() {\n  let sample = useRecoilValue(state.sample);\n  const theme = useTheme();\n  const classes = useStyles();\n  return (\n    <>\n      {sample.map((table, idx) => (\n        <TableContainer\n          key={idx}\n          component={Paper}\n          className={classes.tableContainer}\n        >\n          <Table aria-label=\"simple table\" stickyHeader size=\"small\">\n            <TableHead>\n              <TableRow>\n                <TableCell>Value</TableCell>\n                <TableCell align=\"center\">%</TableCell>\n                <TableCell align=\"center\" className={classes.chony}>\n                  {table.name}\n                </TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {table.entries.map((row, rowid) => (\n                <TableRow key={row.name} className={classes.veryDense}>\n                  <TableCell\n                    key={rowid}\n                    component=\"th\"\n                    scope=\"row\"\n                    className={classes.pre}\n                  >\n                    {row.name}\n                  </TableCell>\n                  <TableCell align=\"right\">{row.uv.toFixed(2)}%</TableCell>\n                  <TableCell align=\"left\">\n                    <div\n                      className={classes.bar}\n                      style={{\n                        display: \"inline-block\",\n                        width: `${row.uv}%`,\n                        lineHeight: 1.3,\n                        backgroundColor: theme.palette.text.primary,\n                      }}\n                    >\n                      &nbsp;\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      ))}\n    </>\n  );\n}\n","import React from \"react\";\nimport {\n  Switch,\n  Radio,\n  RadioGroup,\n  FormControl,\n  FormControlLabel,\n  Select,\n  MenuItem,\n} from \"../material\";\n\nimport {\n  useRecoilState,\n} from \"recoil\";\n\nimport * as state from \"../state\";\n\nexport default function OptionBar() {\n  const [collapse, setCollapse] = useRecoilState(state.collapse);\n  const [transpose, setTranspose] = useRecoilState(state.transpose);\n  const [mode, setMode] = useRecoilState(state.mode);\n\n  let select = (\n    <RadioGroup\n      row\n      aria-label=\"position\"\n      name=\"position\"\n      defaultValue=\"normal\"\n      onChange={(e, v) => setMode(v)}\n    >\n      <FormControlLabel\n        value=\"normal\"\n        control={<Radio color=\"primary\" />}\n        label=\"Normal\"\n      />\n      <FormControlLabel\n        value=\"atleast\"\n        control={<Radio color=\"primary\" />}\n        label=\"At Least\"\n      />\n      <FormControlLabel\n        value=\"atmost\"\n        control={<Radio color=\"primary\" />}\n        label=\"At Most\"\n      />\n    </RadioGroup>\n  );\n\n  void select;\n\n  return (\n    <>\n      <FormControl variant=\"standard\">\n        <Select value={mode} onChange={(e) => setMode(e.target.value)}>\n          <MenuItem value=\"normal\">Normal</MenuItem>\n          <MenuItem value=\"atleast\">At Least</MenuItem>\n          <MenuItem value=\"atmost\">At Most</MenuItem>\n        </Select>\n      </FormControl>\n\n      <FormControlLabel\n        control={\n          <Switch\n            checked={collapse}\n            onChange={(e) => setCollapse(e.target.checked)}\n            name=\"checkedB\"\n            color=\"primary\"\n          />\n        }\n        label=\"Collapse\"\n      />\n\n      <FormControlLabel\n        control={\n          <Switch\n            checked={transpose}\n            onChange={(e) => setTranspose(e.target.checked)}\n            name=\"checkedB\"\n            color=\"primary\"\n          />\n        }\n        label=\"Transpose\"\n      />\n    </>\n  );\n}\n","import React, { useState, useEffect, Suspense } from \"react\";\nimport {\n  Alert,\n  Paper,\n  TextField,\n  AppBar,\n  Tabs,\n  Tab,\n  Box,\n  Button,\n  Toolbar,\n  Typography,\n  Card,\n  CardActions,\n} from \"../material\";\nimport { useLocation } from \"react-router-dom\";\nimport Chart from \"./Chart\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { debug } from \"dicey-math\";\nimport {\n  useRecoilState,\n  useRecoilValue,\n  useRecoilStateLoadable,\n  useSetRecoilState,\n} from \"recoil\";\n\nimport CalcInput from \"./CalcInput\";\nimport CalcTable from \"./CalcTable\";\nimport OptionBar from \"./OptionBar\";\n\nimport * as state from \"../state\";\n\n\nfunction rollOn(l) {\n  let acc = 100 * Math.random();\n  for (let v of l) {\n    acc -= parseFloat(v.uv);\n    if (acc <= 0) return v.name;\n  }\n  return \"?\";\n}\n\nclass SilentErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    console.log(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <div>Error</div>;\n    }\n\n    return this.props.children;\n  }\n}\n\nconst useStyles = makeStyles((theme) => ({\n  doc: { padding: theme.spacing(2) },\n  chart: {\n    height: \"calc(100vh - 350px)\",\n    minHeight: 300,\n    \"& div\": { height: \"100%\" },\n  },\n  pre: { whiteSpace: \"nowrap\" },\n  paper: { position: \"relative\" },\n  freshness: {\n    position: \"absolute\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: \"black\",\n    zIndex: 10000,\n    opacity: 0.5,\n  },\n  textbox: {\n    \"& textarea\": {\n      fontFamily: \"monospace\",\n    },\n  },\n  bar: {\n    marginTop: theme.spacing(1),\n    paddingLeft: theme.spacing(1),\n  },\n}));\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    \"aria-controls\": `simple-tabpanel-${index}`,\n  };\n}\n\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </div>\n  );\n}\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search);\n}\n\nfunction SampleCacher() {\n  const reload = useRecoilValue(state.reload);\n  const [sample, setSample] = useRecoilState(state.sample);\n  const setFresh = useSetRecoilState(state.fresh);\n  const setSampleError = useSetRecoilState(state.sampleError);\n  const [activeSample] = useRecoilStateLoadable(state.activeSample);\n  useEffect(() => {\n    if (activeSample.state === \"hasError\") {\n      setFresh(false);\n      setSampleError(activeSample.contents.message);\n      return;\n    }\n    if (activeSample.state !== \"hasValue\") {\n      setFresh(false);\n      setSampleError(false);\n      return;\n    }\n    if (activeSample.contents === false) {\n      setFresh(false);\n      setSampleError(false);\n      return;\n    }\n    setFresh(true);\n    if (sample !== activeSample.contents) {\n      setSample(activeSample.contents);\n    }\n    setSampleError(false);\n  }, [activeSample, sample, setSampleError, setFresh, setSample, reload]);\n\n  return <></>;\n}\n\nfunction ExportWrapper() {\n  const classes = useStyles();\n  const sample = useRecoilValue(state.sample);\n\n  let exportText = sample\n    .map((s) => {\n      return (\n        `${s.name}\\n` +\n        \"#,%\\n\" +\n        sample[0].entries\n          .map((x) => {\n            return `${x.name},${x.uv}`;\n          })\n          .join(\"\\n\")\n      );\n    })\n    .join(\"\\n\\n\");\n\n  return (\n    <TextField\n      className={classes.textbox}\n      label=\"Export\"\n      readOnly={true}\n      multiline\n      rows={20}\n      fullWidth\n      value={exportText}\n      variant=\"outlined\"\n    />\n  );\n}\n\nfunction RollContainer() {\n  const sample = useRecoilValue(state.sample);\n  const [roll, setRoll] = useState(\"--\");\n  return (\n    <>\n      {roll ? (\n        <Typography variant=\"h1\" component=\"h2\" gutterBottom>\n          {roll}\n        </Typography>\n      ) : null}\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={() => setRoll(rollOn(sample[0].raw))}\n      >\n        Roll\n      </Button>\n    </>\n  );\n}\n\nfunction Freshness() {\n  const classes = useStyles();\n  let fresh = useRecoilValue(state.fresh);\n  return (\n    <div\n      className={classes.freshness}\n      style={{ display: fresh ? \"none\" : \"block\" }}\n    ></div>\n  );\n}\n\nfunction CalcResult() {\n  const classes = useStyles();\n  const [tabValue, handleTabChange] = useState(0);\n\n  return (\n    <Paper className={classes.paper}>\n      <Freshness />\n      <AppBar position=\"static\">\n        <Toolbar variant=\"dense\">\n          <Tabs\n            value={tabValue}\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            onChange={(e, v) => handleTabChange(v)}\n            aria-label=\"simple tabs example\"\n          >\n            <Tab label=\"Table\" {...a11yProps(0)} />\n            <Tab label=\"Graph\" {...a11yProps(1)} />\n            <Tab label=\"Export\" {...a11yProps(2)} />\n            <Tab label=\"Roller\" {...a11yProps(4)} />\n          </Tabs>\n        </Toolbar>\n      </AppBar>\n      <TabPanel value={tabValue} index={0}>\n        <CalcTable />\n      </TabPanel>\n      <TabPanel value={tabValue} index={1} className={classes.chart}>\n        <Chart />\n      </TabPanel>\n      <TabPanel value={tabValue} index={2}>\n        <ExportWrapper />\n      </TabPanel>\n      <TabPanel value={tabValue} index={3}>\n        <RollContainer />\n      </TabPanel>\n    </Paper>\n  );\n}\n\nfunction ZAlert() {\n  const parsed = useRecoilValue(state.parsed);\n  return (\n    <Alert severity=\"info\" style={{ fontFamily: \"monospace\" }}>\n      {parsed.v ? debug(parsed.v) : \"\"}\n    </Alert>\n  );\n}\n\nexport default function Calculate() {\n  const classes = useStyles();\n  const q = useQuery();\n  const [didLoadQuery, setDidLoadQuery] = useState(false);\n  const setQuery = useSetRecoilState(state.query);\n\n  if (q.get(\"input\") && !didLoadQuery) {\n    setTimeout(() => {\n      setQuery(q.get(\"input\"));\n      setDidLoadQuery(true);\n    });\n  }\n\n  return (\n    <>\n      <CalcInput />\n      <Card className={classes.bar}>\n        <CardActions>\n          <OptionBar />\n        </CardActions>\n      </Card>\n      <SilentErrorBoundary>\n        <Suspense>\n          <SampleCacher />\n        </Suspense>\n      </SilentErrorBoundary>\n      <br />\n      <SilentErrorBoundary>\n        <React.Suspense fallback={<div>Loading...</div>}>\n          {\" \"}\n          <CalcResult />\n        </React.Suspense>\n      </SilentErrorBoundary>\n      <br />\n\n      <br />\n      <ZAlert />\n    </>\n  );\n}\n","import React from \"react\";\nimport { NavLink as RouterLink } from \"react-router-dom\";\nimport {\n  Paper,\n  Link,\n  Typography,\n  Backdrop,\n  CircularProgress,\n  Button,\n} from \"../material\";\n\nimport Markdown from \"markdown-to-jsx\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n  doc: { padding: theme.spacing(2) },\n  h1: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h2: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h3: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h4: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h5: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  h6: { paddingTop: theme.spacing(3), paddingBottom: theme.spacing(1) },\n  p: { paddingBottom: theme.spacing(2) },\n  code: {\n    display: \"inline\",\n    backgroundColor: theme.palette.background.default,\n    padding: theme.spacing(0.5),\n  },\n  example: {\n    fontFamily: \"monospace\",\n    whiteSpace: \"pre\",\n    textTransform: \"none\",\n  },\n}));\n\nexport function Example({ children }) {\n  const classes = useStyles();\n  let uri = `/?input=${encodeURIComponent(children ? children[0] : \"\")}`;\n\n  return (\n    <Button\n      component={RouterLink}\n      size=\"small\"\n      to={uri}\n      variant=\"contained\"\n      className={classes.example}\n    >\n      {children}\n    </Button>\n  );\n}\n\nexport default function Docs({ markdown }) {\n  const classes = useStyles();\n\n  let options = {\n    overrides: {\n      h1: {\n        component: Typography,\n        props: { variant: \"h3\", className: classes.h1 },\n      },\n      h2: {\n        component: Typography,\n        props: { variant: \"h4\", className: classes.h2 },\n      },\n      h3: {\n        component: Typography,\n        props: { variant: \"h5\", className: classes.h3 },\n      },\n      h4: {\n        component: Typography,\n        props: { variant: \"h6\", className: classes.h4 },\n      },\n      p: {\n        component: Typography,\n        props: { variant: \"body1\", className: classes.p },\n      },\n      a: { component: Link },\n      li: { component: Typography, props: { component: \"li\" } },\n      code: { component: \"code\", props: { className: classes.code } },\n      kbd: { component: Example },\n    },\n  };\n\n  return (\n    <Paper className={classes.doc}>\n      {typeof markdown == \"string\" && (\n        <Markdown options={options}>{markdown}</Markdown>\n      )}\n      {markdown === false && (\n        <Backdrop className={classes.backdrop}>\n          <CircularProgress size=\"200px\" />\n        </Backdrop>\n      )}\n    </Paper>\n  );\n}\n","import React, { Suspense, useState } from \"react\";\nimport clsx from \"clsx\";\nimport { BrowserRouter, Route, Switch, useHistory } from \"react-router-dom\";\nimport { blue, pink } from \"@material-ui/core/colors\";\nimport {\n  makeStyles,\n  ThemeProvider,\n  darken,\n  createMuiTheme,\n} from \"@material-ui/core/styles\";\n\nimport {\n  RecoilRoot,\n} from \"recoil\";\n\nimport Navigation from \"./components/Navigation\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\n\nimport styles from \"./styles\";\n\nimport {\n  //  Alert,\n  //  Snackbar,\n  AppBar,\n  Toolbar,\n  IconButton,\n  MenuIcon,\n  Typography,\n  //  SettingsIcon,\n  InvertColorsIcon,\n  //  AccountCircleIcon,\n  Container,\n  //  Grid,\n  //  Dialog,\n  CircularProgress,\n  Backdrop,\n  //  Badge,\n  //  NotificationsIcon,\n  //  Menu,\n  //  MenuItem,\n  //  MenuList,\n  //  ListItemIcon,\n  //  LockIcon,\n  //  FormControlLabel,\n} from \"./material\";\n\nimport Calculate from \"./components/Calculate\";\nimport Docs from \"./components/Doc\";\n\nlet dox = require.context(\"!raw-loader!./docs\", false, /\\.md$/);\nconst useStyles = makeStyles(styles);\n\nexport default function App() {\n  const classes = useStyles();\n  const isDark = useMediaQuery(\"(prefers-color-scheme: dark)\");\n  let [paletteType, setPaletType] = useState(undefined);\n\n  paletteType = paletteType || (isDark ? \"dark\" : \"light\");\n\n  const theme = React.useMemo(() => {\n    const nextTheme = createMuiTheme({\n      palette: {\n        primary: {\n          main: paletteType === \"light\" ? blue[700] : blue[200],\n        },\n        secondary: {\n          main: paletteType === \"light\" ? darken(pink.A400, 0.1) : pink[200],\n        },\n        type: paletteType,\n        background: {\n          //default: paletteType === 'light' ? '#fff' : '#121212',\n        },\n      },\n    });\n\n    return nextTheme;\n  }, [paletteType]);\n\n  const history = useHistory();\n  if (localStorage.redirect) {\n    history.replace(localStorage.redirect);\n    delete localStorage.redirect;\n  }\n\n  // const [settingsOpen, setSettingsOpen] = React.useState(false);\n\n  const [open, setOpen] = React.useState(undefined);\n  const shouldStartClosed = useMediaQuery(theme.breakpoints.up(\"md\"));\n  let amOpen = typeof open === \"undefined\" ? shouldStartClosed : open;\n\n  // const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\n\n  const handleDrawerOpen = () => {\n    setOpen(true);\n  };\n  const handleDrawerClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <>\n      <RecoilRoot>\n        <ThemeProvider theme={theme}>\n          <BrowserRouter>\n            <div className={classes.root}>\n              <CssBaseline />\n              <AppBar\n                position=\"absolute\"\n                className={clsx(classes.appBar, amOpen && classes.appBarShift)}\n              >\n                <Toolbar className={classes.toolbar}>\n                  <IconButton\n                    edge=\"start\"\n                    color=\"inherit\"\n                    aria-label=\"open drawer\"\n                    onClick={handleDrawerOpen}\n                    className={clsx(\n                      classes.menuButton,\n                      amOpen && classes.menuButtonHidden\n                    )}\n                  >\n                    <MenuIcon />\n                  </IconButton>\n                  <Typography\n                    component=\"h1\"\n                    variant=\"h6\"\n                    color=\"inherit\"\n                    noWrap\n                    className={classes.title}\n                  >\n                    Dicey\n                  </Typography>\n\n                  <IconButton\n                    color=\"inherit\"\n                    onClick={() =>\n                      setPaletType(paletteType === \"light\" ? \"dark\" : \"light\")\n                    }\n                  >\n                    <InvertColorsIcon />\n                  </IconButton>\n                </Toolbar>\n              </AppBar>\n              <Navigation open={amOpen} handleDrawerClose={handleDrawerClose} />\n              <main className={classes.content}>\n                <div className={classes.appBarSpacer} />\n                <Container maxWidth=\"lg\" className={classes.container}>\n                  <Suspense\n                    fallback={\n                      <Backdrop className={classes.backdrop}>\n                        <CircularProgress size=\"200px\" />\n                      </Backdrop>\n                    }\n                  >\n                    <Switch>\n                      <Route exact path=\"/\" component={Calculate} />\n                      <Route\n                        path=\"/:page\"\n                        render={({ match }) => {\n                          let path = `./${match.params.page}.md`;\n                          if (dox.keys().indexOf(path) !== -1)\n                            return <Docs markdown={dox(path).default} />;\n                          else return <h1>404</h1>;\n                        }}\n                      />\n                    </Switch>\n                  </Suspense>\n                </Container>\n              </main>\n            </div>\n          </BrowserRouter>\n        </ThemeProvider>\n      </RecoilRoot>\n    </>\n  );\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener('load', () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        'This web app is being served cache-first by a service ' +\n                        'worker. To learn more, visit https://cra.link/PWA'\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === 'installed') {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                'New content is available and will be used when all ' +\n                                'tabs for this page are closed. See https://cra.link/PWA.'\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log('Content is cached for offline use.');\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error('Error during service worker registration:', error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { 'Service-Worker': 'script' },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get('content-type');\n            if (\n                response.status === 404 ||\n                (contentType != null && contentType.indexOf('javascript') === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log('No internet connection found. App is running in offline mode.');\n        });\n}\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","let peg = require(\"pegjs\");\nlet parser = peg.generate(require(\"./parser.js\"));\n\nlet {\n  Die,\n  SetValue,\n  Cloud,\n  NumberValue,\n  BinaryOperation,\n  Call,\n  Block,\n  StringValue,\n  ksort,\n} = require(\"./values\");\n\nlet { Output } = require(\"./statements\");\n\nfunction crunch(e) {\n  if (typeof e == \"number\") return e;\n  switch (e.type) {\n    case \"die\":\n      return e;\n    case \"set\":\n      return e;\n    case \"math\":\n      return e;\n    case \"string\":\n      return e;\n    case \"cross\":\n      return {\n        type: \"set\",\n        elements: new Array(roll(e.left)).fill(0).map((n) => e.right),\n      };\n    default:\n      throw new Error(`Unknown type: ${e.type}`);\n  }\n}\n\nfunction valueize(e) {\n  if (typeof e == \"number\") return new NumberValue(e);\n  switch (e.type) {\n    case \"block\":\n      return new Block(e.body.map(valueize));\n    case \"output\":\n      return new Output(valueize(e.expression), e.name || e.text);\n    case \"die\":\n      return new Die(\n        valueize(e.sides),\n        e.times ? valueize(e.times) : undefined\n      );\n    case \"set\":\n      return new SetValue(\n        e.elements.map((v) => valueize(v)),\n        true\n      );\n    case \"string\":\n      return new StringValue(e.value);\n    case \"math\":\n      return new BinaryOperation(\n        valueize(e.left),\n        [e.op, e.m],\n        valueize(e.right)\n      );\n    case \"ntimes\":\n      let left = valueize(e.left);\n      let right = valueize(e.right);\n\n      if (left.type == \"number\")\n        return new SetValue(new Array(left.value).fill(0).map((n) => right));\n\n      return new BinaryOperation(left, \"ntimes\", right);\n    case \"call\":\n      return new Call(\n        e.name,\n        e.args.map((o) => valueize(o))\n      );\n    default:\n      console.log(\"??\", e, typeof e);\n      throw new Error(`Unknown type: ${e.type}`);\n  }\n}\n\nfunction debug(e) {\n  if (typeof e == \"number\") return e;\n  if (typeof e == \"undefined\") return \"?\";\n\n  switch (e.type) {\n    case \"output\":\n      return `output ${debug(e.expression)}\\n`;\n    case \"block\":\n      return e.body.map(debug);\n    case \"die\":\n      return `${e.times == undefined ? \"\" : \"(\" + debug(e.times) + \")\"}d${debug(\n        e.sides\n      )}`;\n    case \"set\":\n      return \"{\" + e.elements.map((v) => debug(v)).join(\",\") + \"}\";\n    case \"math\":\n      return `(${debug(e.left)} ${e.op} ${debug(e.right)})`;\n    case \"ntimes\":\n      return `(${debug(e.left)} x ${debug(e.right)})`;\n    case \"call\":\n      return `${e.name}(${e.args.map((a) => debug(a)).join(\", \")})`;\n    case \"string\":\n      return JSON.stringify(e.value);\n    default:\n      throw new Error(`Unknown type: ${e.type}`);\n  }\n}\n\nfunction keyComp(ao, bo) {\n  //let ao = JSON.parse(a);\n  //let bo = JSON.parse(b);\n\n  if (typeof ao == \"number\" && typeof bo == \"number\") return ksort(bo, ao);\n\n  for (let i = 0; i < bo.length; ++i) {\n    if (bo[i] === undefined) return 1;\n    if (ao[i] != bo[i]) return ksort(bo[i], ao[i]);\n  }\n\n  if (bo.length > ao.length) return -1;\n\n  return 0;\n}\n\nmodule.exports = {\n  parser,\n  debug,\n  valueize,\n  keyComp,\n};\n"],"sourceRoot":""}